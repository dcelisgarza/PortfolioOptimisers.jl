import{_ as p,C as h,o as r,c as o,j as i,a as l,E as a,aA as e,w as n}from"./chunks/framework.DXkZ5nZ1.js";const f=JSON.parse('{"title":"Asset sets matrix","description":"","frontmatter":{},"headers":[],"relativePath":"api/12_ConstraintGeneration/06_AssetSetsMatrix.md","filePath":"api/12_ConstraintGeneration/06_AssetSetsMatrix.md","lastUpdated":null}'),k={name:"api/12_ConstraintGeneration/06_AssetSetsMatrix.md"},d={class:"jldocstring custom-block",open:""},g={class:"jldocstring custom-block",open:""},E={class:"jldocstring custom-block",open:""};function c(u,s,y,F,m,C){const t=h("Badge");return r(),o("div",null,[s[18]||(s[18]=i("h1",{id:"Asset-sets-matrix",tabindex:"-1"},[l("Asset sets matrix "),i("a",{class:"header-anchor",href:"#Asset-sets-matrix","aria-label":'Permalink to "Asset sets matrix {#Asset-sets-matrix}"'},"​")],-1)),i("details",d,[i("summary",null,[s[0]||(s[0]=i("a",{id:"PortfolioOptimisers.AssetSets",href:"#PortfolioOptimisers.AssetSets"},[i("span",{class:"jlbinding"},"PortfolioOptimisers.AssetSets")],-1)),s[1]||(s[1]=l()),a(t,{type:"info",class:"jlObjectType jlType",text:"Type"})]),s[3]||(s[3]=e(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AssetSets{T1, T2, T3} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> AbstractEstimator</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">T1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ukey</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">T2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    dict</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">T3</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><p>Container for asset set and group information used in constraint generation.</p><p><code>AssetSets</code> provides a unified interface for specifying the asset universe and any groupings or partitions of assets. It is used throughout constraint generation and estimator routines to expand group references, map group names to asset lists, and validate asset membership.</p><p>If a key in <code>dict</code> starts with the same value as <code>key</code>, it means that the corresponding group must have the same length as the asset universe, <code>dict[key]</code>. This is useful for defining partitions of the asset universe, for example when using [<code>asset_sets_matrix</code>]-(@ref) with [<code>NestedClustered</code>]-(@ref).</p><p><strong>Fields</strong></p><ul><li><p><code>key</code>: The key in <code>dict</code> that identifies the primary list of assets. Groups prefixed by this <code>key</code> must have the same length as <code>dict[key]</code> as their lengths are preserved across views.</p></li><li><p><code>ukey</code>: The key prefix used for asset sets with unique entries. If present, there must be an equivalent group prefixed by <code>key</code> with the same length as <code>dict[key]</code> as that group will be used to find the unique entries for the view.</p></li><li><p><code>dict</code>: A dictionary mapping group names (or asset set names) to vectors of asset identifiers.</p></li></ul><p><strong>Constructor</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AssetSets</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; key</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractString</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;nx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ukey</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractString</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ux&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          dict</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractDict{&lt;:AbstractString, &lt;:Any}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Keyword arguments correspond to the fields above.</p><p><strong>Validation</strong></p><ul><li><p><code>!isempty(dict)</code>.</p></li><li><p><code>haskey(dict, key)</code>.</p></li><li><p><code>key !== ukey</code>.</p></li><li><p><code>!startswith(key, ukey)</code>.</p></li><li><p><code>!startswith(ukey, key)</code>.</p></li><li><p>If a key in <code>dict</code> starts with the same value as <code>key</code>, <code>length(dict[nx]) == length(dict[key])</code>.</p></li><li><p>If a key in <code>dict</code> starts with the same value as <code>ukey</code>, there must be a corresponding key in <code>dict</code> where the <code>ukey</code> prefix is replaced by the <code>key</code> prefix, and <code>length(dict[replace(k, ukey =&gt; key)]) == length(dict[key])</code>.</p></li></ul><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> AssetSets</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;nx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, dict </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nx&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;B&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;C&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;group1&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;B&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AssetSets</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   key ┼ String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;nx&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ukey ┼ String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ux&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  dict ┴ Dict{String, Vector{String}}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nx&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;B&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;C&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;group1&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;B&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span></code></pre></div><p><strong>Related</strong></p><ul><li><p><a href="/PortfolioOptimisers.jl/previews/PR64/api/12_ConstraintGeneration/02_LinearConstraintGeneration#PortfolioOptimisers.replace_group_by_assets"><code>replace_group_by_assets</code></a></p></li><li><p><a href="/PortfolioOptimisers.jl/previews/PR64/api/12_ConstraintGeneration/02_LinearConstraintGeneration#PortfolioOptimisers.estimator_to_val"><code>estimator_to_val</code></a></p></li><li><p><a href="/PortfolioOptimisers.jl/previews/PR64/api/12_ConstraintGeneration/02_LinearConstraintGeneration#PortfolioOptimisers.linear_constraints"><code>linear_constraints</code></a></p></li></ul>`,15)),a(t,{type:"info",class:"source-link",text:"source"},{default:n(()=>[...s[2]||(s[2]=[i("a",{href:"https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/e54d8e481a5ad63bb808e665707e9584ad5604c7/src/12_ConstraintGeneration/02_LinearConstraintGeneration.jl#L188-L239",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),i("details",g,[i("summary",null,[s[4]||(s[4]=i("a",{id:"PortfolioOptimisers.AssetSetsMatrixEstimator",href:"#PortfolioOptimisers.AssetSetsMatrixEstimator"},[i("span",{class:"jlbinding"},"PortfolioOptimisers.AssetSetsMatrixEstimator")],-1)),s[5]||(s[5]=l()),a(t,{type:"info",class:"jlObjectType jlType",text:"Type"})]),s[7]||(s[7]=e(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AssetSetsMatrixEstimator{T1} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> AbstractConstraintEstimator</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    val</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">T1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><p>Estimator for constructing asset set membership matrices from asset groupings.</p><p><code>AssetSetsMatrixEstimator</code> is a container type for specifying the key or group name used to generate a binary asset-group membership matrix from an <a href="/PortfolioOptimisers.jl/previews/PR64/api/12_ConstraintGeneration/06_AssetSetsMatrix#PortfolioOptimisers.AssetSets"><code>AssetSets</code></a> object. This is used in constraint generation and portfolio construction workflows that require mapping assets to groups or categories.</p><p><strong>Fields</strong></p><ul><li><code>val</code>: The key or group name to extract from the asset sets.</li></ul><p><strong>Constructor</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AssetSetsMatrixEstimator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; val</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Keyword arguments correspond to the fields above.</p><p><strong>Validation</strong></p><ul><li><code>!isempty(val)</code>.</li></ul><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sets </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> AssetSets</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;nx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        dict </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nx&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;B&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;C&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                    &quot;nx_sector&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Tech&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Tech&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Finance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> est </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> AssetSetsMatrixEstimator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; val </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;nx_sector&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">AssetSetsMatrixEstimator</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  val ┴ String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;nx_sector&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> asset_sets_matrix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(est, sets)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">×</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> transpose</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">BitMatrix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) with eltype Bool</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  0</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span></span></code></pre></div><p><strong>Related</strong></p><ul><li><p><a href="/PortfolioOptimisers.jl/previews/PR64/api/12_ConstraintGeneration/06_AssetSetsMatrix#PortfolioOptimisers.AssetSets"><code>AssetSets</code></a></p></li><li><p>[<code>asset_sets_matrix</code>]-(@ref)</p></li><li><p><a href="/PortfolioOptimisers.jl/previews/PR64/api/12_ConstraintGeneration/01_Base_ConstraintGeneration#PortfolioOptimisers.AbstractConstraintEstimator"><code>AbstractConstraintEstimator</code></a></p></li></ul>`,14)),a(t,{type:"info",class:"source-link",text:"source"},{default:n(()=>[...s[6]||(s[6]=[i("a",{href:"https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/e54d8e481a5ad63bb808e665707e9584ad5604c7/src/12_ConstraintGeneration/06_AssetSetsMatrix.jl#L1-L46",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),i("details",E,[i("summary",null,[s[8]||(s[8]=i("a",{id:"PortfolioOptimisers.asset_sets_matrix",href:"#PortfolioOptimisers.asset_sets_matrix"},[i("span",{class:"jlbinding"},"PortfolioOptimisers.asset_sets_matrix")],-1)),s[9]||(s[9]=l()),a(t,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),s[14]||(s[14]=e(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">asset_sets_matrix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(smtx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sets</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AssetSets</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Construct a binary asset-group membership matrix from asset set groupings.</p><p><code>asset_sets_matrix</code> generates a binary (0/1) matrix indicating asset membership in groups or categories, based on the key or group name <code>smtx</code> in the provided <a href="/PortfolioOptimisers.jl/previews/PR64/api/12_ConstraintGeneration/06_AssetSetsMatrix#PortfolioOptimisers.AssetSets"><code>AssetSets</code></a>. Each row corresponds to a unique group value, and each column to an asset in the universe. This is used in constraint generation and portfolio construction workflows that require mapping assets to groups or categories.</p><p><strong>Arguments</strong></p><ul><li><p><code>smtx</code>: The key or group name to extract from the asset sets.</p></li><li><p><code>sets</code>: An <a href="/PortfolioOptimisers.jl/previews/PR64/api/12_ConstraintGeneration/06_AssetSetsMatrix#PortfolioOptimisers.AssetSets"><code>AssetSets</code></a> object specifying the asset universe and groupings.</p></li></ul><p><strong>Returns</strong></p><ul><li><code>A::BitMatrix</code>: A binary matrix of size (number of groups) × (number of assets), where <code>A[i, j] == 1</code> if asset <code>j</code> belongs to group <code>i</code>.</li></ul><p><strong>Details</strong></p><ul><li><p>The function checks that <code>smtx</code> exists in <code>sets.dict</code> and that its length matches the asset universe.</p></li><li><p>Each unique value in <code>sets.dict[smtx]</code> defines a group.</p></li><li><p>The output matrix is transposed so that rows correspond to groups and columns to assets.</p></li></ul><p><strong>Validation</strong></p><ul><li><p><code>haskey(sets.dict, smtx)</code>.</p></li><li><p>Throws an <code>AssertionError</code> if the length of <code>sets.dict[smtx]</code> does not match the asset universe.</p></li></ul><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sets </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> AssetSets</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; key </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;nx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        dict </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Dict</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nx&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;A&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;B&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;C&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                    &quot;nx_sector&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Tech&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Tech&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Finance&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> asset_sets_matrix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nx_sector&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sets)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">×</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> transpose</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">BitMatrix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) with eltype Bool</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  0</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1</span></span></code></pre></div><p><strong>Related</strong></p><ul><li><p><a href="/PortfolioOptimisers.jl/previews/PR64/api/12_ConstraintGeneration/06_AssetSetsMatrix#PortfolioOptimisers.AssetSets"><code>AssetSets</code></a></p></li><li><p><a href="/PortfolioOptimisers.jl/previews/PR64/api/12_ConstraintGeneration/06_AssetSetsMatrix#PortfolioOptimisers.AssetSetsMatrixEstimator"><code>AssetSetsMatrixEstimator</code></a></p></li><li><p>[<code>asset_sets_matrix_view</code>]-(@ref)</p></li></ul>`,15)),a(t,{type:"info",class:"source-link",text:"source"},{default:n(()=>[...s[10]||(s[10]=[i("a",{href:"https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/e54d8e481a5ad63bb808e665707e9584ad5604c7/src/12_ConstraintGeneration/06_AssetSetsMatrix.jl#L60-L105",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1}),s[15]||(s[15]=e('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">asset_sets_matrix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(smtx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Option{&lt;:MatNum}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, args</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>No-op fallback for asset set membership matrix construction.</p><p>This method returns the input matrix <code>smtx</code> unchanged. It is used as a fallback when the asset set membership matrix is already provided as an <code>MatNum</code> or is <code>nothing</code>, enabling composability and uniform interface handling in constraint generation workflows.</p><p><strong>Arguments</strong></p><ul><li><p><code>smtx</code>: An existing asset set membership matrix (<code>MatNum</code>) or <code>nothing</code>.</p></li><li><p><code>args...</code>: Additional positional arguments (ignored).</p></li></ul><p><strong>Returns</strong></p><ul><li><code>smtx::Option{&lt;:MatNum}</code>: The input matrix or <code>nothing</code>, unchanged.</li></ul><p><strong>Related</strong></p><ul><li><p><a href="/PortfolioOptimisers.jl/previews/PR64/api/12_ConstraintGeneration/06_AssetSetsMatrix#PortfolioOptimisers.AssetSets"><code>AssetSets</code></a></p></li><li><p><a href="/PortfolioOptimisers.jl/previews/PR64/api/12_ConstraintGeneration/06_AssetSetsMatrix#PortfolioOptimisers.AssetSetsMatrixEstimator"><code>AssetSetsMatrixEstimator</code></a></p></li><li><p>[<code>asset_sets_matrix</code>]-(@ref)</p></li></ul>',9)),a(t,{type:"info",class:"source-link",text:"source"},{default:n(()=>[...s[11]||(s[11]=[i("a",{href:"https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/e54d8e481a5ad63bb808e665707e9584ad5604c7/src/12_ConstraintGeneration/06_AssetSetsMatrix.jl#L118-L139",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1}),s[16]||(s[16]=e('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">asset_sets_matrix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(smtx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AssetSetsMatrixEstimator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, sets</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AssetSets</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>This method is a wrapper calling:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">asset_sets_matrix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(smtx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">val, sets)</span></span></code></pre></div><p>It is used for type stability and to provide a uniform interface for processing constraint estimators, as well as simplifying the use of multiple estimators simulatneously.</p><p><strong>Related</strong></p><ul><li>[<code>asset_sets_matrix</code>]-(@ref)</li></ul>',6)),a(t,{type:"info",class:"source-link",text:"source"},{default:n(()=>[...s[12]||(s[12]=[i("a",{href:"https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/e54d8e481a5ad63bb808e665707e9584ad5604c7/src/12_ConstraintGeneration/06_AssetSetsMatrix.jl#L143-L155",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1}),s[17]||(s[17]=e(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">asset_sets_matrix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(smtx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VecMatNum_ASetMatE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                  sets</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AssetSets</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Broadcasts [<code>asset_sets_matrix</code>]-(@ref) over the vector.</p><p>Provides a uniform interface for processing multiple constraint estimators simulatneously.</p>`,3)),a(t,{type:"info",class:"source-link",text:"source"},{default:n(()=>[...s[13]||(s[13]=[i("a",{href:"https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/e54d8e481a5ad63bb808e665707e9584ad5604c7/src/12_ConstraintGeneration/06_AssetSetsMatrix.jl#L159-L166",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})])])}const _=p(k,[["render",c]]);export{f as __pageData,_ as default};
