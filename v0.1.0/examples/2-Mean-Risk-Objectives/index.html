<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Example 2: MeanRisk objectives · PortfolioOptimisers.jl</title><meta name="title" content="Example 2: MeanRisk objectives · PortfolioOptimisers.jl"/><meta property="og:title" content="Example 2: MeanRisk objectives · PortfolioOptimisers.jl"/><meta property="twitter:title" content="Example 2: MeanRisk objectives · PortfolioOptimisers.jl"/><meta name="description" content="Documentation for PortfolioOptimisers.jl."/><meta property="og:description" content="Documentation for PortfolioOptimisers.jl."/><meta property="twitter:description" content="Documentation for PortfolioOptimisers.jl."/><meta property="og:url" content="https://dcelisgarza.github.io/PortfolioOptimisers.jl/examples/2-Mean-Risk-Objectives/"/><meta property="twitter:url" content="https://dcelisgarza.github.io/PortfolioOptimisers.jl/examples/2-Mean-Risk-Objectives/"/><link rel="canonical" href="https://dcelisgarza.github.io/PortfolioOptimisers.jl/examples/2-Mean-Risk-Objectives/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="PortfolioOptimisers.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">PortfolioOptimisers.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">PortfolioOptimisers</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../1-Getting-Started/">Example 1: Simple <code>MeanRisk</code> optimisation</a></li><li class="is-active"><a class="tocitem" href>Example 2: <code>MeanRisk</code> objectives</a><ul class="internal"><li><a class="tocitem" href="#1.-ReturnsResult-data"><span>1. ReturnsResult data</span></a></li><li><a class="tocitem" href="#2.-MeanRisk-objectives"><span>2. MeanRisk objectives</span></a></li></ul></li><li><a class="tocitem" href="../3-Efficient-Frontier/">Example 3: Efficient frontier</a></li><li><a class="tocitem" href="../4-Pareto-Surface/">Example 4: Pareto surface</a></li><li><a class="tocitem" href="../5-Budget-Constraints/">Example 5: Budget constraints</a></li></ul></li><li><a class="tocitem" href="../../090-contributing/">Contributing guidelines</a></li><li><a class="tocitem" href="../../091-developer/">Developer documentation</a></li><li><a class="tocitem" href="../../092-reference/">Reference</a></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../../001-Base/">Base</a></li><li><a class="tocitem" href="../../002-Tools/">Tools</a></li><li><a class="tocitem" href="../../003-PosdefMatrix/">PosdefMatrix</a></li><li><a class="tocitem" href="../../004-Denoise/">Denoise</a></li><li><a class="tocitem" href="../../005-Detone/">Detone</a></li><li><a class="tocitem" href="../../006-MatrixProcessing/">Matrix Processing</a></li><li><input class="collapse-toggle" id="menuitem-6-7" type="checkbox"/><label class="tocitem" for="menuitem-6-7"><span class="docs-label">Moments</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../007-01-Moments/">Base Moments</a></li><li><a class="tocitem" href="../../007-02-Moments/">Mean</a></li><li><a class="tocitem" href="../../007-03-Moments/">Covariance</a></li><li><a class="tocitem" href="../../007-04-Moments/">Variance and Standard Deviation</a></li><li><a class="tocitem" href="../../007-05-Moments/">Gerber Covariance</a></li><li><a class="tocitem" href="../../007-06-Moments/">Smyth-Broby Covariance</a></li><li><a class="tocitem" href="../../007-07-Moments/">Distance Covariance</a></li><li><a class="tocitem" href="../../007-08-Moments/">Lower Tail Dependence Covariance</a></li><li><a class="tocitem" href="../../007-09-Moments/">Rank Covariances</a></li><li><a class="tocitem" href="../../007-10-Moments/">Histogram</a></li><li><a class="tocitem" href="../../007-11-Moments/">Mutual Information Covariance</a></li><li><a class="tocitem" href="../../007-12-Moments/">PortfolioOptimisersCovariance</a></li><li><a class="tocitem" href="../../007-13-Moments/">Shrunk Expected Returns</a></li><li><a class="tocitem" href="../../007-14-Moments/">Equilibrium expected returns</a></li><li><a class="tocitem" href="../../007-15-Moments/">Excess expected returns</a></li><li><a class="tocitem" href="../../007-16-Moments/">Coskewness</a></li><li><a class="tocitem" href="../../007-17-Moments/">Cokurtosis</a></li><li><a class="tocitem" href="../../007-18-Moments/">Regression</a></li><li><a class="tocitem" href="../../007-19-Moments/">Stepwise Regression</a></li><li><a class="tocitem" href="../../007-20-Moments/">Dimensional Reduction Regression</a></li><li><a class="tocitem" href="../../007-21-Moments/">Implied Volatility</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-8" type="checkbox"/><label class="tocitem" for="menuitem-6-8"><span class="docs-label">Distance</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../008-1-Distance/">Base Distance</a></li><li><a class="tocitem" href="../../008-2-Distance/">Distance</a></li><li><a class="tocitem" href="../../008-3-Distance/">Distances of Distances</a></li><li><a class="tocitem" href="../../008-4-Distance/">General Distance</a></li><li><a class="tocitem" href="../../008-5-Distance/">General Distance of Distances</a></li></ul></li><li><a class="tocitem" href="../../009-JuMPModelOptimisation/">JuMP Model Optimisation</a></li><li><a class="tocitem" href="../../010-OWA/">Ordered Weights Array</a></li><li><input class="collapse-toggle" id="menuitem-6-11" type="checkbox"/><label class="tocitem" for="menuitem-6-11"><span class="docs-label">Phylogeny</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../011-1-Base-Phylogeny/">Base Phylogeny</a></li><li><a class="tocitem" href="../../011-2-Clustering/">Clustering</a></li><li><a class="tocitem" href="../../011-3-Hierarchical/">Hierarchical</a></li><li><a class="tocitem" href="../../011-4-DBTH/">Direct Bubble Hierarchy Tree</a></li><li><a class="tocitem" href="../../011-5-Phylogeny/">Phylogeny</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Example 2: <code>MeanRisk</code> objectives</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Example 2: <code>MeanRisk</code> objectives</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/main/examples/2-Mean-Risk-Objectives.jl#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><p>The source files for all examples can be found in <a href="https://github.com/dcelisgarza/PortfolioOptimiser.jl/tree/main/examples/">/examples</a>.</p><h1 id="Example-2:-MeanRisk-objectives"><a class="docs-heading-anchor" href="#Example-2:-MeanRisk-objectives">Example 2: <code>MeanRisk</code> objectives</a><a id="Example-2:-MeanRisk-objectives-1"></a><a class="docs-heading-anchor-permalink" href="#Example-2:-MeanRisk-objectives" title="Permalink"></a></h1><p>In this example we will show the different objective functions available in <code>MeanRisk</code>, and compare them to a benchmark.</p><pre><code class="language-julia hljs">using PortfolioOptimisers, PrettyTables
# Format for pretty tables.
tsfmt = (v, i, j) -&gt; begin
    if j == 1
        return Date(v)
    else
        return v
    end
end;
resfmt = (v, i, j) -&gt; begin
    if j == 1
        return v
    else
        return isa(v, Number) ? &quot;$(round(v*100, digits=3)) %&quot; : v
    end
end;</code></pre><h2 id="1.-ReturnsResult-data"><a class="docs-heading-anchor" href="#1.-ReturnsResult-data">1. ReturnsResult data</a><a id="1.-ReturnsResult-data-1"></a><a class="docs-heading-anchor-permalink" href="#1.-ReturnsResult-data" title="Permalink"></a></h2><p>We will use the same data as the previous example.</p><pre><code class="language-julia hljs">using CSV, TimeSeries, DataFrames

X = TimeArray(CSV.File(joinpath(@__DIR__, &quot;SP500.csv.gz&quot;)); timestamp = :Date)[(end - 252):end]
pretty_table(X[(end - 5):end]; formatters = tsfmt)

# Compute the returns
rd = prices_to_returns(X)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">ReturnsResult
    nx | 20-element Vector{String}
     X | 252×20 Matrix{Float64}
    nf | nothing
     F | nothing
    ts | 252-element Vector{Dates.Date}
    iv | nothing
  ivpa | nothing
</code></pre><h2 id="2.-MeanRisk-objectives"><a class="docs-heading-anchor" href="#2.-MeanRisk-objectives">2. MeanRisk objectives</a><a id="2.-MeanRisk-objectives-1"></a><a class="docs-heading-anchor-permalink" href="#2.-MeanRisk-objectives" title="Permalink"></a></h2><p>Here we will show the different objective functions available in <code>MeanRisk</code>. We will also use the semi-standard deviation risk measure.</p><pre><code class="language-julia hljs">using Clarabel
slv = Solver(; name = :clarabel1, solver = Clarabel.Optimizer,
             settings = Dict(&quot;verbose&quot; =&gt; false),
             check_sol = (; allow_local = true, allow_almost = true))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Solver
         name | Symbol: :clarabel1
       solver | UnionAll: Clarabel.MOIwrapper.Optimizer
     settings | Dict{String, Bool}: Dict{String, Bool}(&quot;verbose&quot; =&gt; 0)
    check_sol | @NamedTuple{allow_local::Bool, allow_almost::Bool}: (allow_local = true, allow_almost = true)
  add_bridges | Bool: true
</code></pre><p>Here we encounter another consequence of the design philosophy of <code>PortfolioOptimisers</code>. An entire class of risk measures can be categorised and consistently implemented as <code>LowOrderMoment</code> risk measures with different internal algorithms. This corresponds to the semi-standard deviation.</p><pre><code class="language-julia hljs">r = LowOrderMoment(;
                   alg = LowOrderDeviation(;
                                           alg = SecondLowerMoment(; alg = SqrtRiskExpr())))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">LowOrderMoment
  settings | RiskMeasureSettings
           |   scale | Float64: 1.0
           |      ub | nothing
           |     rke | Bool: true
         w | nothing
        mu | nothing
       alg | LowOrderDeviation
           |    ve | SimpleVariance
           |       |          me | nothing
           |       |           w | nothing
           |       |   corrected | Bool: true
           |   alg | SecondLowerMoment
           |       |   alg | SqrtRiskExpr()
</code></pre><p>Since we will perform various optimisations on the same data, there&#39;s no need to redo work. Lets precompute the prior statistics using the <code>EmpiricalPrior</code> to avoid recomputing them every time we call the optimisation.</p><pre><code class="language-julia hljs">pr = prior(EmpiricalPrior(), rd)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">LowOrderPrior
        X | 252×20 Matrix{Float64}
       mu | 20-element Vector{Float64}
    sigma | 20×20 Matrix{Float64}
     chol | nothing
        w | nothing
      ens | nothing
      kld | nothing
       ow | nothing
       rr | nothing
     f_mu | nothing
  f_sigma | nothing
      f_w | nothing
</code></pre><p>We can provide the prior result to <code>JuMPOptimiser</code>.</p><pre><code class="language-julia hljs">opt = JuMPOptimiser(; pe = pr, slv = slv)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">JuMPOptimiser
      pe | LowOrderPrior
         |         X | 252×20 Matrix{Float64}
         |        mu | 20-element Vector{Float64}
         |     sigma | 20×20 Matrix{Float64}
         |      chol | nothing
         |         w | nothing
         |       ens | nothing
         |       kld | nothing
         |        ow | nothing
         |        rr | nothing
         |      f_mu | nothing
         |   f_sigma | nothing
         |       f_w | nothing
     slv | Solver
         |          name | Symbol: :clarabel1
         |        solver | UnionAll: Clarabel.MOIwrapper.Optimizer
         |      settings | Dict{String, Bool}: Dict{String, Bool}(&quot;verbose&quot; =&gt; 0)
         |     check_sol | @NamedTuple{allow_local::Bool, allow_almost::Bool}: (allow_local = true, allow_almost = true)
         |   add_bridges | Bool: true
      wb | WeightBounds
         |   lb | Float64: 0.0
         |   ub | Float64: 1.0
     bgt | Float64: 1.0
    sbgt | nothing
      lt | nothing
      st | nothing
     lcs | nothing
     lcm | nothing
    cent | nothing
   gcard | nothing
  sgcard | nothing
    smtx | nothing
   sgmtx | nothing
     slt | nothing
     sst | nothing
    sglt | nothing
    sgst | nothing
    sets | nothing
    nplg | nothing
    cplg | nothing
      tn | nothing
      te | nothing
    fees | nothing
     ret | ArithmeticReturn
         |   ucs | nothing
         |    lb | nothing
     sce | SumScalariser: SumScalariser()
    ccnt | nothing
    cobj | nothing
      sc | Int64: 1
      so | Int64: 1
    card | nothing
   scard | nothing
     nea | nothing
      l1 | nothing
      l2 | nothing
      ss | nothing
  strict | Bool: false
</code></pre><p>Here we define the estimators for different objective functions.</p><pre><code class="language-julia hljs"># Minimum risk
mr1 = MeanRisk(; r = r, obj = MinimumRisk(), opt = opt)
# Maximum utility with risk aversion parameter 2
mr2 = MeanRisk(; r = r, obj = MaximumUtility(), opt = opt)
# Risk-free rate of 4.2/100/252
rf = 4.2 / 100 / 252
mr3 = MeanRisk(; r = r, obj = MaximumRatio(; rf = rf), opt = opt)
# Maximum return
mr4 = MeanRisk(; r = r, obj = MaximumReturn(), opt = opt)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">MeanRisk
       opt | JuMPOptimiser
           |       pe | LowOrderPrior
           |          |         X | 252×20 Matrix{Float64}
           |          |        mu | 20-element Vector{Float64}
           |          |     sigma | 20×20 Matrix{Float64}
           |          |      chol | nothing
           |          |         w | nothing
           |          |       ens | nothing
           |          |       kld | nothing
           |          |        ow | nothing
           |          |        rr | nothing
           |          |      f_mu | nothing
           |          |   f_sigma | nothing
           |          |       f_w | nothing
           |      slv | Solver
           |          |          name | Symbol: :clarabel1
           |          |        solver | UnionAll: Clarabel.MOIwrapper.Optimizer
           |          |      settings | Dict{String, Bool}: Dict{String, Bool}(&quot;verbose&quot; =&gt; 0)
           |          |     check_sol | @NamedTuple{allow_local::Bool, allow_almost::Bool}: (allow_local = true, allow_almost = true)
           |          |   add_bridges | Bool: true
           |       wb | WeightBounds
           |          |   lb | Float64: 0.0
           |          |   ub | Float64: 1.0
           |      bgt | Float64: 1.0
           |     sbgt | nothing
           |       lt | nothing
           |       st | nothing
           |      lcs | nothing
           |      lcm | nothing
           |     cent | nothing
           |    gcard | nothing
           |   sgcard | nothing
           |     smtx | nothing
           |    sgmtx | nothing
           |      slt | nothing
           |      sst | nothing
           |     sglt | nothing
           |     sgst | nothing
           |     sets | nothing
           |     nplg | nothing
           |     cplg | nothing
           |       tn | nothing
           |       te | nothing
           |     fees | nothing
           |      ret | ArithmeticReturn
           |          |   ucs | nothing
           |          |    lb | nothing
           |      sce | SumScalariser: SumScalariser()
           |     ccnt | nothing
           |     cobj | nothing
           |       sc | Int64: 1
           |       so | Int64: 1
           |     card | nothing
           |    scard | nothing
           |      nea | nothing
           |       l1 | nothing
           |       l2 | nothing
           |       ss | nothing
           |   strict | Bool: false
         r | LowOrderMoment
           |   settings | RiskMeasureSettings
           |            |   scale | Float64: 1.0
           |            |      ub | nothing
           |            |     rke | Bool: true
           |          w | nothing
           |         mu | nothing
           |        alg | LowOrderDeviation
           |            |    ve | SimpleVariance
           |            |       |          me | nothing
           |            |       |           w | nothing
           |            |       |   corrected | Bool: true
           |            |   alg | SecondLowerMoment
           |            |       |   alg | SqrtRiskExpr()
       obj | MaximumReturn()
        wi | nothing
  fallback | nothing
</code></pre><p>Lets perform the optimisations, but since we&#39;ve precomputed the prior statistics, we do not need to provide the returns data. We will also produce a benchmark using the <code>InverseVolatility</code> estimator.</p><pre><code class="language-julia hljs">res1 = optimise!(mr1)
res2 = optimise!(mr2)
res3 = optimise!(mr3)
res4 = optimise!(mr4)
res0 = optimise!(InverseVolatility(; pe = pr))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">NaiveOptimisation
       oe | DataType: InverseVolatility
       pr | LowOrderPrior
          |         X | 252×20 Matrix{Float64}
          |        mu | 20-element Vector{Float64}
          |     sigma | 20×20 Matrix{Float64}
          |      chol | nothing
          |         w | nothing
          |       ens | nothing
          |       kld | nothing
          |        ow | nothing
          |        rr | nothing
          |      f_mu | nothing
          |   f_sigma | nothing
          |       f_w | nothing
        w | 20-element Vector{Float64}
  retcode | OptimisationSuccess
          |   res | nothing
</code></pre><p>Lets view the results as pretty tables.</p><pre><code class="language-julia hljs">pretty_table(DataFrame(; :assets =&gt; rd.nx, :benchmark =&gt; res0.w, :MinimumRisk =&gt; res1.w,
                       :MaximumUtility =&gt; res2.w, :MaximumRatio =&gt; res3.w,
                       :MaximumReturn =&gt; res4.w); formatters = resfmt)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌────────┬───────────┬─────────────┬────────────────┬──────────────┬───────────────┐
│ assets │ benchmark │ MinimumRisk │ MaximumUtility │ MaximumRatio │ MaximumReturn │
│ String │   Float64 │     Float64 │        Float64 │      Float64 │       Float64 │
├────────┼───────────┼─────────────┼────────────────┼──────────────┼───────────────┤
│   AAPL │   4.004 % │       0.0 % │          0.0 % │        0.0 % │         0.0 % │
│    AMD │   2.332 % │       0.0 % │          0.0 % │        0.0 % │         0.0 % │
│    BAC │    4.39 % │       0.0 % │          0.0 % │        0.0 % │         0.0 % │
│    BBY │   3.143 % │       0.0 % │          0.0 % │        0.0 % │         0.0 % │
│    CVX │   4.326 % │     8.817 % │        6.884 % │        0.0 % │         0.0 % │
│     GE │   4.087 % │       0.0 % │          0.0 % │        0.0 % │         0.0 % │
│     HD │    4.55 % │       0.0 % │          0.0 % │        0.0 % │         0.0 % │
│    JNJ │   8.175 % │    49.192 % │       39.727 % │        0.0 % │         0.0 % │
│    JPM │   4.771 % │     3.414 % │        0.689 % │        0.0 % │         0.0 % │
│     KO │   7.239 % │     9.206 % │       11.461 % │        0.0 % │         0.0 % │
│    LLY │   5.224 % │       0.0 % │          0.0 % │        0.0 % │         0.0 % │
│    MRK │   7.143 % │    16.429 % │        26.96 % │     69.998 % │         0.0 % │
│   MSFT │   4.046 % │       0.0 % │          0.0 % │        0.0 % │         0.0 % │
│    PEP │    7.32 % │       0.0 % │          0.0 % │        0.0 % │         0.0 % │
│    PFE │   5.274 % │       0.0 % │          0.0 % │        0.0 % │         0.0 % │
│     PG │   6.482 % │     1.722 % │          0.0 % │        0.0 % │         0.0 % │
│    RRC │   2.263 % │       0.0 % │          0.0 % │        0.0 % │         0.0 % │
│    UNH │   5.843 % │       0.0 % │          0.0 % │        0.0 % │         0.0 % │
│    WMT │   5.329 % │     7.142 % │        6.463 % │        0.0 % │         0.0 % │
│    XOM │   4.058 % │     4.078 % │        7.816 % │     30.002 % │       100.0 % │
└────────┴───────────┴─────────────┴────────────────┴──────────────┴───────────────┘</code></pre><p>In order to confirm that the objective functions do what they say on the tin, we can compute the risk, return and risk return ration. There are individual functions for each <code>expected_risk</code>, <code>expected_return</code>, <code>expected_ratio</code>, but we also have <code>expected_risk_ret_ratio</code> that returns all three at once (<code>risk</code>, <code>return</code>, <code>risk-return ratio</code>) which is what we will use here.</p><p>Due to the fact that we provide different expected portfolio return measures, any function that computes the expected portfolio return also needs to know which return type to compute. We will be consistent with the returns we used in the optimisation.</p><pre><code class="language-julia hljs">rk1, rt1, rr1 = expected_risk_ret_ratio(r, res1.ret, res1.w, res1.pr; rf = rf);
rk2, rt2, rr2 = expected_risk_ret_ratio(r, res2.ret, res2.w, res2.pr; rf = rf);
rk3, rt3, rr3 = expected_risk_ret_ratio(r, res3.ret, res3.w, res3.pr; rf = rf);
rk4, rt4, rr4 = expected_risk_ret_ratio(r, res4.ret, res4.w, res4.pr; rf = rf);
rk0, rt0, rr0 = expected_risk_ret_ratio(r, ArithmeticReturn(), res0.w, res0.pr; rf = rf);</code></pre><p>Lets make sure the results are what we expect.</p><pre><code class="language-julia hljs">pretty_table(DataFrame(;
                       :obj =&gt; [:MinimumRisk, :MaximumUtility, :MaximumRatio,
                                :MaximumReturn, :Benchmark],
                       :rk =&gt; [rk1, rk2, rk3, rk4, rk0], :rt =&gt; [rt1, rt2, rt3, rt4, rt0],
                       :rr =&gt; [rr1, rr2, rr3, rr4, rr0]); formatters = resfmt)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌────────────────┬─────────┬─────────┬──────────┐
│            obj │      rk │      rt │       rr │
│         Symbol │ Float64 │ Float64 │  Float64 │
├────────────────┼─────────┼─────────┼──────────┤
│    MinimumRisk │ 0.651 % │ 0.075 % │  8.899 % │
│ MaximumUtility │ 0.657 % │ 0.098 % │ 12.333 % │
│   MaximumRatio │ 0.829 % │ 0.196 % │ 21.611 % │
│  MaximumReturn │ 1.621 % │ 0.264 % │ 15.236 % │
│      Benchmark │ 0.813 % │ 0.025 % │   0.97 % │
└────────────────┴─────────┴─────────┴──────────┘</code></pre><p>We can seee that indeed, the minimum risk produces the portfolio with minimum risk, the maximum ratio produces the portfolio with the maximum risk-return ratio, and the maximum return portfolio produces the portfolio with the maximum return.</p><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../1-Getting-Started/">« Example 1: Simple <code>MeanRisk</code> optimisation</a><a class="docs-footer-nextpage" href="../3-Efficient-Frontier/">Example 3: Efficient frontier »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Sunday 7 September 2025 16:47">Sunday 7 September 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
