<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Matrix Processing · PortfolioOptimisers.jl</title><meta name="title" content="Matrix Processing · PortfolioOptimisers.jl"/><meta property="og:title" content="Matrix Processing · PortfolioOptimisers.jl"/><meta property="twitter:title" content="Matrix Processing · PortfolioOptimisers.jl"/><meta name="description" content="Documentation for PortfolioOptimisers.jl."/><meta property="og:description" content="Documentation for PortfolioOptimisers.jl."/><meta property="twitter:description" content="Documentation for PortfolioOptimisers.jl."/><meta property="og:url" content="https://dcelisgarza.github.io/PortfolioOptimisers.jl/006-MatrixProcessing/"/><meta property="twitter:url" content="https://dcelisgarza.github.io/PortfolioOptimisers.jl/006-MatrixProcessing/"/><link rel="canonical" href="https://dcelisgarza.github.io/PortfolioOptimisers.jl/006-MatrixProcessing/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="PortfolioOptimisers.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">PortfolioOptimisers.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">PortfolioOptimisers</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../examples/1-Getting-Started/">Example 1: Simple <code>MeanRisk</code> optimisation</a></li><li><a class="tocitem" href="../examples/2-Mean-Risk-Objectives/">Example 2: <code>MeanRisk</code> objectives</a></li><li><a class="tocitem" href="../examples/3-Efficient-Frontier/">Example 3: Efficient frontier</a></li><li><a class="tocitem" href="../examples/4-Pareto-Surface/">Example 4: Pareto surface</a></li><li><a class="tocitem" href="../examples/5-Budget-Constraints/">Example 5: Budget constraints</a></li></ul></li><li><a class="tocitem" href="../090-contributing/">Contributing guidelines</a></li><li><a class="tocitem" href="../091-developer/">Developer documentation</a></li><li><a class="tocitem" href="../092-reference/">Reference</a></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../001-Base/">Base</a></li><li><a class="tocitem" href="../002-Tools/">Tools</a></li><li><a class="tocitem" href="../003-PosdefMatrix/">PosdefMatrix</a></li><li><a class="tocitem" href="../004-Denoise/">Denoise</a></li><li><a class="tocitem" href="../005-Detone/">Detone</a></li><li class="is-active"><a class="tocitem" href>Matrix Processing</a></li><li><input class="collapse-toggle" id="menuitem-6-7" type="checkbox"/><label class="tocitem" for="menuitem-6-7"><span class="docs-label">Moments</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../007-01-Moments/">Base Moments</a></li><li><a class="tocitem" href="../007-02-Moments/">Mean</a></li><li><a class="tocitem" href="../007-03-Moments/">Covariance</a></li><li><a class="tocitem" href="../007-04-Moments/">Variance and Standard Deviation</a></li><li><a class="tocitem" href="../007-05-Moments/">Gerber Covariance</a></li><li><a class="tocitem" href="../007-06-Moments/">Smyth-Broby Covariance</a></li><li><a class="tocitem" href="../007-07-Moments/">Distance Covariance</a></li><li><a class="tocitem" href="../007-08-Moments/">Lower Tail Dependence Covariance</a></li><li><a class="tocitem" href="../007-09-Moments/">Rank Covariances</a></li><li><a class="tocitem" href="../007-10-Moments/">Histogram</a></li><li><a class="tocitem" href="../007-11-Moments/">Mutual Information Covariance</a></li><li><a class="tocitem" href="../007-12-Moments/">PortfolioOptimisersCovariance</a></li><li><a class="tocitem" href="../007-13-Moments/">Shrunk Expected Returns</a></li><li><a class="tocitem" href="../007-14-Moments/">Equilibrium expected returns</a></li><li><a class="tocitem" href="../007-15-Moments/">Excess expected returns</a></li><li><a class="tocitem" href="../007-16-Moments/">Coskewness</a></li><li><a class="tocitem" href="../007-17-Moments/">Cokurtosis</a></li><li><a class="tocitem" href="../007-18-Moments/">Regression</a></li><li><a class="tocitem" href="../007-19-Moments/">Stepwise Regression</a></li><li><a class="tocitem" href="../007-20-Moments/">Dimensional Reduction Regression</a></li><li><a class="tocitem" href="../007-21-Moments/">Implied Volatility</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-8" type="checkbox"/><label class="tocitem" for="menuitem-6-8"><span class="docs-label">Distance</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../008-1-Distance/">Base Distance</a></li><li><a class="tocitem" href="../008-2-Distance/">Distance</a></li><li><a class="tocitem" href="../008-3-Distance/">Distances of Distances</a></li><li><a class="tocitem" href="../008-4-Distance/">General Distance</a></li><li><a class="tocitem" href="../008-5-Distance/">General Distance of Distances</a></li></ul></li><li><a class="tocitem" href="../009-JuMPModelOptimisation/">JuMP Model Optimisation</a></li><li><a class="tocitem" href="../010-OWA/">Ordered Weights Array</a></li><li><input class="collapse-toggle" id="menuitem-6-11" type="checkbox"/><label class="tocitem" for="menuitem-6-11"><span class="docs-label">Phylogeny</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../011-1-Base-Phylogeny/">Base Phylogeny</a></li><li><a class="tocitem" href="../011-2-Clustering/">Clustering</a></li><li><a class="tocitem" href="../011-3-Hierarchical/">Hierarchical</a></li><li><a class="tocitem" href="../011-4-DBTH/">Direct Bubble Hierarchy Tree</a></li><li><a class="tocitem" href="../011-5-Phylogeny/">Phylogeny</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API</a></li><li class="is-active"><a href>Matrix Processing</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Matrix Processing</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/main/docs/src/006-MatrixProcessing.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Matrix-Processing"><a class="docs-heading-anchor" href="#Matrix-Processing">Matrix Processing</a><a id="Matrix-Processing-1"></a><a class="docs-heading-anchor-permalink" href="#Matrix-Processing" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimisers.DefaultMatrixProcessing" href="#PortfolioOptimisers.DefaultMatrixProcessing"><code>PortfolioOptimisers.DefaultMatrixProcessing</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct DefaultMatrixProcessing{T1, T2, T3, T4} &lt;: AbstractMatrixProcessingEstimator
    pdm::T1
    denoise::T2
    detone::T3
    alg::T4
end</code></pre><p>A flexible container type for configuring and applying matrix processing routines in PortfolioOptimisers.jl.</p><p><code>DefaultMatrixProcessing</code> encapsulates all steps required for processing covariance or correlation matrices, including positive definiteness enforcement, denoising, detoning, and optional custom matrix processing algorithms. It is the standard estimator type for matrix processing pipelines and supports a variety of estimator and algorithm types.</p><p><strong>Fields</strong></p><ul><li><code>pdm</code>: Positive definite matrix estimator (see <a href="../003-PosdefMatrix/#PortfolioOptimisers.Posdef"><code>Posdef</code></a>), or <code>nothing</code> to skip.</li><li><code>denoise</code>: Denoising estimator (see <a href="../004-Denoise/#Denoise"><code>Denoise</code></a>), or <code>nothing</code> to skip.</li><li><code>detone</code>: Detoning estimator (see <a href="../005-Detone/#Detone"><code>Detone</code></a>), or <code>nothing</code> to skip.</li><li><code>alg</code>: Optional custom matrix processing algorithm, or <code>nothing</code> to skip.</li></ul><p><strong>Constructor</strong></p><pre><code class="nohighlight hljs">DefaultMatrixProcessing(; pdm = Posdef(), denoise = nothing, detone = nothing, alg = nothing)</code></pre><p>Keyword arguments correspond to the fields above. The constructor infers types and sets defaults for robust matrix processing.</p><p><strong>Related</strong></p><ul><li><a href="#PortfolioOptimisers.AbstractMatrixProcessingEstimator"><code>AbstractMatrixProcessingEstimator</code></a></li><li><a href="#PortfolioOptimisers.matrix_processing!"><code>matrix_processing!</code></a></li><li><a href="#PortfolioOptimisers.matrix_processing"><code>matrix_processing</code></a></li><li><a href="#PortfolioOptimisers.NonPositiveDefiniteMatrixProcessing"><code>NonPositiveDefiniteMatrixProcessing</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/31251c4d7efcfa2b6e037f1d311c433b9ad329f3/src/6_MatrixProcessing.jl#L72-L103">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimisers.DefaultMatrixProcessing-Tuple{}" href="#PortfolioOptimisers.DefaultMatrixProcessing-Tuple{}"><code>PortfolioOptimisers.DefaultMatrixProcessing</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">DefaultMatrixProcessing(; pdm::Union{Nothing, &lt;:Posdef} = Posdef(),
                          denoise::Union{Nothing, &lt;:Denoise} = nothing,
                          detone::Union{Nothing, &lt;:Detone} = nothing,
                          alg::Union{Nothing, &lt;:AbstractMatrixProcessingAlgorithm} = nothing)</code></pre><p>Construct a <a href="#PortfolioOptimisers.DefaultMatrixProcessing"><code>DefaultMatrixProcessing</code></a> object, configuring all steps for matrix processing in PortfolioOptimisers.jl.</p><p><strong>Arguments</strong></p><ul><li><code>pdm</code>: Positive definite matrix estimator.</li><li><code>denoise</code>: Denoising estimator.</li><li><code>detone</code>: Detoning estimator.</li><li><code>alg</code>: Optional custom matrix processing algorithm.</li></ul><p><strong>Returns</strong></p><ul><li><code>DefaultMatrixProcessing</code>: A configured matrix processing estimator.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; mp = DefaultMatrixProcessing()
DefaultMatrixProcessing
      pdm | Posdef
          |   alg | UnionAll: NearestCorrelationMatrix.Newton
  denoise | nothing
   detone | nothing
      alg | nothing

julia&gt; mp = DefaultMatrixProcessing(; denoise = Denoise(), detone = Detone(; n = 2))
DefaultMatrixProcessing
      pdm | Posdef
          |   alg | UnionAll: NearestCorrelationMatrix.Newton
  denoise | Denoise
          |      alg | ShrunkDenoise
          |          |   alpha | Float64: 0.0
          |     args | Tuple{}: ()
          |   kwargs | @NamedTuple{}: NamedTuple()
          |   kernel | typeof(AverageShiftedHistograms.Kernels.gaussian): AverageShiftedHistograms.Kernels.gaussian
          |        m | Int64: 10
          |        n | Int64: 1000
   detone | Detone
          |   n | Int64: 2
      alg | nothing</code></pre><p><strong>Related</strong></p><ul><li><a href="#PortfolioOptimisers.DefaultMatrixProcessing"><code>DefaultMatrixProcessing</code></a></li><li><a href="#PortfolioOptimisers.matrix_processing!"><code>matrix_processing!</code></a></li><li><a href="#PortfolioOptimisers.matrix_processing"><code>matrix_processing</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/31251c4d7efcfa2b6e037f1d311c433b9ad329f3/src/6_MatrixProcessing.jl#L110-L162">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimisers.NonPositiveDefiniteMatrixProcessing" href="#PortfolioOptimisers.NonPositiveDefiniteMatrixProcessing"><code>PortfolioOptimisers.NonPositiveDefiniteMatrixProcessing</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct NonPositiveDefiniteMatrixProcessing{T1, T2, T3} &lt;: AbstractMatrixProcessingEstimator
    denoise::T1
    detone::T2
    alg::T3
end</code></pre><p>A container type for matrix processing pipelines that do <strong>not</strong> enforce positive definiteness in PortfolioOptimisers.jl.</p><p><code>NonPositiveDefiniteMatrixProcessing</code> is intended for workflows where positive definiteness is not required or is handled externally. It supports denoising, detoning, and optional custom matrix processing algorithms, but skips positive definite projection.</p><p><strong>Fields</strong></p><ul><li><code>denoise</code>: Denoising estimator (see <a href="../004-Denoise/#Denoise"><code>Denoise</code></a>), or <code>nothing</code> to skip.</li><li><code>detone</code>: Detoning estimator (see <a href="../005-Detone/#Detone"><code>Detone</code></a>), or <code>nothing</code> to skip.</li><li><code>alg</code>: Optional custom matrix processing algorithm, or <code>nothing</code> to skip.</li></ul><p><strong>Constructor</strong></p><pre><code class="nohighlight hljs">NonPositiveDefiniteMatrixProcessing(; denoise = nothing, detone = nothing, alg = nothing)</code></pre><p>Keyword arguments correspond to the fields above. The constructor infers types and sets defaults for robust matrix processing without positive definite enforcement.</p><p><strong>Related</strong></p><ul><li><a href="#PortfolioOptimisers.AbstractMatrixProcessingEstimator"><code>AbstractMatrixProcessingEstimator</code></a></li><li><a href="#PortfolioOptimisers.matrix_processing!"><code>matrix_processing!</code></a></li><li><a href="#PortfolioOptimisers.matrix_processing"><code>matrix_processing</code></a></li><li><a href="#PortfolioOptimisers.DefaultMatrixProcessing"><code>DefaultMatrixProcessing</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/31251c4d7efcfa2b6e037f1d311c433b9ad329f3/src/6_MatrixProcessing.jl#L170-L199">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimisers.NonPositiveDefiniteMatrixProcessing-Tuple{}" href="#PortfolioOptimisers.NonPositiveDefiniteMatrixProcessing-Tuple{}"><code>PortfolioOptimisers.NonPositiveDefiniteMatrixProcessing</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">NonPositiveDefiniteMatrixProcessing(; denoise::Union{Nothing, &lt;:Denoise} = nothing,
                                      detone::Union{Nothing, &lt;:Detone} = nothing,
                                      alg::Union{Nothing,
                                                &lt;:AbstractMatrixProcessingAlgorithm} = nothing)</code></pre><p>Construct a <a href="#PortfolioOptimisers.NonPositiveDefiniteMatrixProcessing"><code>NonPositiveDefiniteMatrixProcessing</code></a> object, configuring matrix processing steps without positive definite enforcement.</p><p><strong>Arguments</strong></p><ul><li><code>denoise</code>: Denoising estimator.</li><li><code>detone</code>: Detoning estimator.</li><li><code>alg</code>: Optional custom matrix processing algorithm.</li></ul><p><strong>Returns</strong></p><ul><li><code>NonPositiveDefiniteMatrixProcessing</code>: A configured matrix processing estimator.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; mp = NonPositiveDefiniteMatrixProcessing()
NonPositiveDefiniteMatrixProcessing
  denoise | nothing
   detone | nothing
      alg | nothing

julia&gt; mp = NonPositiveDefiniteMatrixProcessing(; denoise = Denoise(), detone = Detone(; n = 2))
NonPositiveDefiniteMatrixProcessing
  denoise | Denoise
          |      alg | ShrunkDenoise
          |          |   alpha | Float64: 0.0
          |     args | Tuple{}: ()
          |   kwargs | @NamedTuple{}: NamedTuple()
          |   kernel | typeof(AverageShiftedHistograms.Kernels.gaussian): AverageShiftedHistograms.Kernels.gaussian
          |        m | Int64: 10
          |        n | Int64: 1000
   detone | Detone
          |   n | Int64: 2
      alg | nothing</code></pre><p><strong>Related</strong></p><ul><li><a href="#PortfolioOptimisers.NonPositiveDefiniteMatrixProcessing"><code>NonPositiveDefiniteMatrixProcessing</code></a></li><li><a href="#PortfolioOptimisers.matrix_processing!"><code>matrix_processing!</code></a></li><li><a href="#PortfolioOptimisers.matrix_processing"><code>matrix_processing</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/31251c4d7efcfa2b6e037f1d311c433b9ad329f3/src/6_MatrixProcessing.jl#L205-L252">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimisers.matrix_processing!" href="#PortfolioOptimisers.matrix_processing!"><code>PortfolioOptimisers.matrix_processing!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">matrix_processing!(mp::DefaultMatrixProcessing, sigma::AbstractMatrix, X::AbstractMatrix, args...; kwargs...)
matrix_processing!(mp::NonPosdefMatrixProcessing, sigma::AbstractMatrix, X::AbstractMatrix, args...; kwargs...)
matrix_processing!(::Nothing, args...; kwargs...)</code></pre><p>In-place processing of a covariance or correlation matrix.</p><ul><li>If <code>mp</code> is <code>nothing</code>, this is a no-op and returns <code>nothing</code>.</li><li>If <code>mp</code> is a <a href="#PortfolioOptimisers.DefaultMatrixProcessing"><code>DefaultMatrixProcessing</code></a> object, the specified matrix processing steps are applied to <code>sigma</code> in-place, using the provided data matrix <code>X</code>.</li><li>If <code>mp</code> is a <a href="#PortfolioOptimisers.NonPositiveDefiniteMatrixProcessing"><code>NonPositiveDefiniteMatrixProcessing</code></a> object, the specified matrix processing steps <strong>without enforcing positive definiteness</strong> are applied to <code>sigma</code> in-place, using the provided data matrix <code>X</code>.</li></ul><p>The processing pipeline consists of:</p><ol><li>Positive definiteness enforcement via <a href="../003-PosdefMatrix/#PortfolioOptimisers.posdef!"><code>posdef!</code></a> (if <code>mp.pdm</code> is <a href="#PortfolioOptimisers.DefaultMatrixProcessing"><code>DefaultMatrixProcessing</code></a>).</li><li>Denoising via <a href="../004-Denoise/#PortfolioOptimisers.denoise!"><code>denoise!</code></a> (if <code>mp.denoise</code> is not <code>nothing</code>).</li><li>Detoning via <a href="../005-Detone/#PortfolioOptimisers.detone!"><code>detone!</code></a> (if <code>mp.detone</code> is not <code>nothing</code>).</li><li>Optional custom matrix processing algorithm via <a href="#PortfolioOptimisers.matrix_processing_algorithm!"><code>matrix_processing_algorithm!</code></a> (if <code>mp.alg</code> is not <code>nothing</code>).</li></ol><p><strong>Arguments</strong></p><ul><li><code>mp</code>: Matrix processing estimator specifying the pipeline.</li><li><code>sigma</code>: Covariance or correlation matrix to be processed (modified in-place).</li><li><code>X</code>: Data matrix (observations × assets) used for denoising and detoning.</li><li><code>args...</code>: Additional positional arguments passed to custom algorithms.</li><li><code>kwargs...</code>: Additional keyword arguments passed to custom algorithms.</li></ul><p><strong>Returns</strong></p><ul><li><code>nothing</code>. The input matrix <code>sigma</code> is modified in-place.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; using StableRNGs, Statistics

julia&gt; rng = StableRNG(123456789);

julia&gt; X = rand(rng, 10, 5);

julia&gt; sigma = cov(X)
5×5 Matrix{Float64}:
  0.132026     0.0022567   0.0198243    0.00359832  -0.00743829
  0.0022567    0.0514194  -0.0131242    0.004123     0.0312379
  0.0198243   -0.0131242   0.0843837   -0.0325342   -0.00609624
  0.00359832   0.004123   -0.0325342    0.0424332    0.0152574
 -0.00743829   0.0312379  -0.00609624   0.0152574    0.0926441

julia&gt; matrix_processing!(DefaultMatrixProcessing(; denoise = Denoise()), sigma, X)

julia&gt; sigma
5×5 Matrix{Float64}:
 0.132026  0.0        0.0        0.0        0.0
 0.0       0.0514194  0.0        0.0        0.0
 0.0       0.0        0.0843837  0.0        0.0
 0.0       0.0        0.0        0.0424332  0.0
 0.0       0.0        0.0        0.0        0.0926441

julia&gt; sigma = cov(X)
5×5 Matrix{Float64}:
  0.132026     0.0022567   0.0198243    0.00359832  -0.00743829
  0.0022567    0.0514194  -0.0131242    0.004123     0.0312379
  0.0198243   -0.0131242   0.0843837   -0.0325342   -0.00609624
  0.00359832   0.004123   -0.0325342    0.0424332    0.0152574
 -0.00743829   0.0312379  -0.00609624   0.0152574    0.0926441

julia&gt; matrix_processing!(DefaultMatrixProcessing(; detone = Detone()), sigma, X)

julia&gt; sigma
5×5 Matrix{Float64}:
 0.132026    0.0124802   0.0117303    0.0176194    0.0042142
 0.0124802   0.0514194   0.0273105   -0.0290864    0.0088165
 0.0117303   0.0273105   0.0843837   -0.00279296   0.0619156
 0.0176194  -0.0290864  -0.00279296   0.0424332   -0.0242252
 0.0042142   0.0088165   0.0619156   -0.0242252    0.0926441</code></pre><p><strong>Related</strong></p><ul><li><a href="#PortfolioOptimisers.matrix_processing"><code>matrix_processing</code></a></li><li><a href="#PortfolioOptimisers.DefaultMatrixProcessing"><code>DefaultMatrixProcessing</code></a></li><li><a href="../003-PosdefMatrix/#PortfolioOptimisers.posdef!"><code>posdef!</code></a></li><li><a href="../004-Denoise/#PortfolioOptimisers.denoise!"><code>denoise!</code></a></li><li><a href="../005-Detone/#PortfolioOptimisers.detone!"><code>detone!</code></a></li><li><a href="#PortfolioOptimisers.matrix_processing_algorithm!"><code>matrix_processing_algorithm!</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/31251c4d7efcfa2b6e037f1d311c433b9ad329f3/src/6_MatrixProcessing.jl#L260-L344">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimisers.matrix_processing" href="#PortfolioOptimisers.matrix_processing"><code>PortfolioOptimisers.matrix_processing</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">matrix_processing(mp::DefaultMatrixProcessing, sigma::AbstractMatrix, X::AbstractMatrix, args...; kwargs...)
matrix_processing(mp::NonPosdefMatrixProcessing, sigma::AbstractMatrix, X::AbstractMatrix, args...; kwargs...)
matrix_processing(::Nothing, args...; kwargs...)</code></pre><p>Same as <a href="#PortfolioOptimisers.matrix_processing!"><code>matrix_processing!</code></a>, but returns a new matrix instead of modifying <code>sigma</code> in-place.</p><ul><li>If <code>mp</code> is <code>nothing</code>, this is a no-op and returns <code>nothing</code>.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; using StableRNGs, Statistics

julia&gt; rng = StableRNG(123456789);

julia&gt; X = rand(rng, 10, 5);

julia&gt; sigma = cov(X)
5×5 Matrix{Float64}:
  0.132026     0.0022567   0.0198243    0.00359832  -0.00743829
  0.0022567    0.0514194  -0.0131242    0.004123     0.0312379
  0.0198243   -0.0131242   0.0843837   -0.0325342   -0.00609624
  0.00359832   0.004123   -0.0325342    0.0424332    0.0152574
 -0.00743829   0.0312379  -0.00609624   0.0152574    0.0926441

julia&gt; sigma_ds = matrix_processing(DefaultMatrixProcessing(; denoise = Denoise()), sigma, X)
5×5 Matrix{Float64}:
 0.132026  0.0        0.0        0.0        0.0
 0.0       0.0514194  0.0        0.0        0.0
 0.0       0.0        0.0843837  0.0        0.0
 0.0       0.0        0.0        0.0424332  0.0
 0.0       0.0        0.0        0.0        0.0926441

julia&gt; sigma = cov(X)
5×5 Matrix{Float64}:
  0.132026     0.0022567   0.0198243    0.00359832  -0.00743829
  0.0022567    0.0514194  -0.0131242    0.004123     0.0312379
  0.0198243   -0.0131242   0.0843837   -0.0325342   -0.00609624
  0.00359832   0.004123   -0.0325342    0.0424332    0.0152574
 -0.00743829   0.0312379  -0.00609624   0.0152574    0.0926441

julia&gt; sigma_dt = matrix_processing(DefaultMatrixProcessing(; detone = Detone()), sigma, X)
5×5 Matrix{Float64}:
 0.132026    0.0124802   0.0117303    0.0176194    0.0042142
 0.0124802   0.0514194   0.0273105   -0.0290864    0.0088165
 0.0117303   0.0273105   0.0843837   -0.00279296   0.0619156
 0.0176194  -0.0290864  -0.00279296   0.0424332   -0.0242252
 0.0042142   0.0088165   0.0619156   -0.0242252    0.0926441</code></pre><p><strong>Related</strong></p><ul><li><a href="#PortfolioOptimisers.matrix_processing!"><code>matrix_processing!</code></a></li><li><a href="#PortfolioOptimisers.DefaultMatrixProcessing"><code>DefaultMatrixProcessing</code></a></li><li><a href="../003-PosdefMatrix/#PortfolioOptimisers.posdef!"><code>posdef!</code></a></li><li><a href="../004-Denoise/#PortfolioOptimisers.denoise!"><code>denoise!</code></a></li><li><a href="../005-Detone/#PortfolioOptimisers.detone!"><code>detone!</code></a></li><li><a href="#PortfolioOptimisers.matrix_processing_algorithm!"><code>matrix_processing_algorithm!</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/31251c4d7efcfa2b6e037f1d311c433b9ad329f3/src/6_MatrixProcessing.jl#L366-L425">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimisers.AbstractMatrixProcessingEstimator" href="#PortfolioOptimisers.AbstractMatrixProcessingEstimator"><code>PortfolioOptimisers.AbstractMatrixProcessingEstimator</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AbstractMatrixProcessingEstimator &lt;: AbstractEstimator</code></pre><p>Abstract supertype for all matrix processing estimator types in PortfolioOptimisers.jl.</p><p>All concrete types that implement matrix processing routines—such as covariance matrix cleaning, denoising, or detoning—should subtype <code>AbstractMatrixProcessingEstimator</code>. This enables a consistent interface for matrix processing estimators throughout the package.</p><p><strong>Related</strong></p><ul><li><a href="../001-Base/#PortfolioOptimisers.AbstractEstimator"><code>AbstractEstimator</code></a></li><li><a href="#PortfolioOptimisers.DefaultMatrixProcessing"><code>DefaultMatrixProcessing</code></a></li><li><a href="#PortfolioOptimisers.NonPositiveDefiniteMatrixProcessing"><code>NonPositiveDefiniteMatrixProcessing</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/31251c4d7efcfa2b6e037f1d311c433b9ad329f3/src/6_MatrixProcessing.jl#L1-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimisers.AbstractMatrixProcessingAlgorithm" href="#PortfolioOptimisers.AbstractMatrixProcessingAlgorithm"><code>PortfolioOptimisers.AbstractMatrixProcessingAlgorithm</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">AbstractMatrixProcessingAlgorithm &lt;: AbstractAlgorithm</code></pre><p>Abstract supertype for all matrix processing algorithm types in PortfolioOptimisers.jl.</p><p>All concrete types that implement a specific matrix processing algorithm (e.g., custom cleaning or transformation routines) should subtype <code>AbstractMatrixProcessingAlgorithm</code>. This enables flexible extension and dispatch of matrix processing routines.</p><p><strong>Related</strong></p><ul><li><a href="../001-Base/#PortfolioOptimisers.AbstractAlgorithm"><code>AbstractAlgorithm</code></a></li><li><a href="#PortfolioOptimisers.DefaultMatrixProcessing"><code>DefaultMatrixProcessing</code></a></li><li><a href="#PortfolioOptimisers.NonPositiveDefiniteMatrixProcessing"><code>NonPositiveDefiniteMatrixProcessing</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/31251c4d7efcfa2b6e037f1d311c433b9ad329f3/src/6_MatrixProcessing.jl#L16-L28">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimisers.matrix_processing_algorithm!" href="#PortfolioOptimisers.matrix_processing_algorithm!"><code>PortfolioOptimisers.matrix_processing_algorithm!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">matrix_processing_algorithm!(::Nothing, args...; kwargs...)</code></pre><p>No-op fallback for matrix processing algorithm routines.</p><p>These methods are called internally when no matrix processing algorithm is specified (i.e., when the algorithm argument is <code>nothing</code>). They perform no operation and return <code>nothing</code>, ensuring that the matrix processing pipeline can safely skip optional algorithmic steps.</p><p><strong>Arguments</strong></p><ul><li><code>::Nothing</code>: Indicates that no algorithm is provided.</li><li><code>args...</code>: Additional positional arguments (ignored).</li><li><code>kwargs...</code>: Additional keyword arguments (ignored).</li></ul><p><strong>Returns</strong></p><ul><li><code>nothing</code>.</li></ul><p><strong>Related</strong></p><ul><li><a href="#PortfolioOptimisers.matrix_processing_algorithm"><code>matrix_processing_algorithm</code></a></li><li><a href="#PortfolioOptimisers.DefaultMatrixProcessing"><code>DefaultMatrixProcessing</code></a></li><li><a href="#PortfolioOptimisers.NonPositiveDefiniteMatrixProcessing"><code>NonPositiveDefiniteMatrixProcessing</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/31251c4d7efcfa2b6e037f1d311c433b9ad329f3/src/6_MatrixProcessing.jl#L31-L53">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimisers.matrix_processing_algorithm" href="#PortfolioOptimisers.matrix_processing_algorithm"><code>PortfolioOptimisers.matrix_processing_algorithm</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">matrix_processing_algorithm(::Nothing, args...; kwargs...)</code></pre><p>Same as <a href="#PortfolioOptimisers.matrix_processing_algorithm!"><code>matrix_processing_algorithm!</code></a>, but meant for returning a new matrix instead of modifying it in-place.</p><p><strong>Related</strong></p><ul><li><a href="#PortfolioOptimisers.matrix_processing_algorithm!"><code>matrix_processing_algorithm!</code></a></li><li><a href="#PortfolioOptimisers.DefaultMatrixProcessing"><code>DefaultMatrixProcessing</code></a></li><li><a href="#PortfolioOptimisers.NonPositiveDefiniteMatrixProcessing"><code>NonPositiveDefiniteMatrixProcessing</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/31251c4d7efcfa2b6e037f1d311c433b9ad329f3/src/6_MatrixProcessing.jl#L57-L67">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../005-Detone/">« Detone</a><a class="docs-footer-nextpage" href="../007-01-Moments/">Base Moments »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Saturday 6 September 2025 09:12">Saturday 6 September 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
