<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Denoise · PortfolioOptimisers.jl</title><meta name="title" content="Denoise · PortfolioOptimisers.jl"/><meta property="og:title" content="Denoise · PortfolioOptimisers.jl"/><meta property="twitter:title" content="Denoise · PortfolioOptimisers.jl"/><meta name="description" content="Documentation for PortfolioOptimisers.jl."/><meta property="og:description" content="Documentation for PortfolioOptimisers.jl."/><meta property="twitter:description" content="Documentation for PortfolioOptimisers.jl."/><meta property="og:url" content="https://dcelisgarza.github.io/PortfolioOptimisers.jl/004-Denoise/"/><meta property="twitter:url" content="https://dcelisgarza.github.io/PortfolioOptimisers.jl/004-Denoise/"/><link rel="canonical" href="https://dcelisgarza.github.io/PortfolioOptimisers.jl/004-Denoise/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="PortfolioOptimisers.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">PortfolioOptimisers.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">PortfolioOptimisers</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../examples/1-Getting-Started/">Example 1: Simple <code>MeanRisk</code> optimisation</a></li><li><a class="tocitem" href="../examples/2-Mean-Risk-Objectives/">Example 2: <code>MeanRisk</code> objectives</a></li><li><a class="tocitem" href="../examples/3-Efficient-Frontier/">Example 3: Efficient frontier</a></li><li><a class="tocitem" href="../examples/4-Pareto-Surface/">Example 4: Pareto surface</a></li><li><a class="tocitem" href="../examples/5-Budget-Constraints/">Example 5: Budget constraints</a></li></ul></li><li><a class="tocitem" href="../090-contributing/">Contributing guidelines</a></li><li><a class="tocitem" href="../091-developer/">Developer documentation</a></li><li><a class="tocitem" href="../092-reference/">Reference</a></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../001-Base/">Base</a></li><li><a class="tocitem" href="../002-Tools/">Tools</a></li><li><a class="tocitem" href="../003-PosdefMatrix/">PosdefMatrix</a></li><li class="is-active"><a class="tocitem" href>Denoise</a></li><li><a class="tocitem" href="../005-Detone/">Detone</a></li><li><a class="tocitem" href="../006-MatrixProcessing/">Matrix Processing</a></li><li><input class="collapse-toggle" id="menuitem-6-7" type="checkbox"/><label class="tocitem" for="menuitem-6-7"><span class="docs-label">Moments</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../007-01-Moments/">Base Moments</a></li><li><a class="tocitem" href="../007-02-Moments/">Mean</a></li><li><a class="tocitem" href="../007-03-Moments/">Covariance</a></li><li><a class="tocitem" href="../007-04-Moments/">Variance and Standard Deviation</a></li><li><a class="tocitem" href="../007-05-Moments/">Gerber Covariance</a></li><li><a class="tocitem" href="../007-06-Moments/">Smyth-Broby Covariance</a></li><li><a class="tocitem" href="../007-07-Moments/">Distance Covariance</a></li><li><a class="tocitem" href="../007-08-Moments/">Lower Tail Dependence Covariance</a></li><li><a class="tocitem" href="../007-09-Moments/">Rank Covariances</a></li><li><a class="tocitem" href="../007-10-Moments/">Histogram</a></li><li><a class="tocitem" href="../007-11-Moments/">Mutual Information Covariance</a></li><li><a class="tocitem" href="../007-12-Moments/">PortfolioOptimisersCovariance</a></li><li><a class="tocitem" href="../007-13-Moments/">Shrunk Expected Returns</a></li><li><a class="tocitem" href="../007-14-Moments/">Equilibrium expected returns</a></li><li><a class="tocitem" href="../007-15-Moments/">Excess expected returns</a></li><li><a class="tocitem" href="../007-16-Moments/">Coskewness</a></li><li><a class="tocitem" href="../007-17-Moments/">Cokurtosis</a></li><li><a class="tocitem" href="../007-18-Moments/">Regression</a></li><li><a class="tocitem" href="../007-19-Moments/">Stepwise Regression</a></li><li><a class="tocitem" href="../007-20-Moments/">Dimensional Reduction Regression</a></li><li><a class="tocitem" href="../007-21-Moments/">Implied Volatility</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-8" type="checkbox"/><label class="tocitem" for="menuitem-6-8"><span class="docs-label">Distance</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../008-1-Distance/">Base Distance</a></li><li><a class="tocitem" href="../008-2-Distance/">Distance</a></li><li><a class="tocitem" href="../008-3-Distance/">Distances of Distances</a></li><li><a class="tocitem" href="../008-4-Distance/">General Distance</a></li><li><a class="tocitem" href="../008-5-Distance/">General Distance of Distances</a></li></ul></li><li><a class="tocitem" href="../009-JuMPModelOptimisation/">JuMP Model Optimisation</a></li><li><a class="tocitem" href="../010-OWA/">Ordered Weights Array</a></li><li><input class="collapse-toggle" id="menuitem-6-11" type="checkbox"/><label class="tocitem" for="menuitem-6-11"><span class="docs-label">Phylogeny</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../011-1-Phylogeny/">Base Phylogeny</a></li><li><a class="tocitem" href="../011-2-Phylogeny/">Clustering</a></li><li><a class="tocitem" href="../011-3-Phylogeny/">Hierarchical</a></li><li><a class="tocitem" href="../011-4-Phylogeny/">Direct Bubble Hierarchy Tree</a></li><li><a class="tocitem" href="../011-5-Phylogeny/">Phylogeny</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-12" type="checkbox"/><label class="tocitem" for="menuitem-6-12"><span class="docs-label">Constraint Generation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../012-1-ConstraintGeneration/">Base Constraint Generation</a></li><li><a class="tocitem" href="../012-2-ConstraintGeneration/">Linear Constraints</a></li><li><a class="tocitem" href="../012-3-ConstraintGeneration/">Phylogeny Constraints</a></li><li><a class="tocitem" href="../012-4-ConstraintGeneration/">Weight Bounds</a></li><li><a class="tocitem" href="../012-5-ConstraintGeneration/">Buy-in Threshold Constraints</a></li></ul></li><li><a class="tocitem" href="../013-10-Prior/">Prior</a></li><li><a class="tocitem" href="../019-15-Optimisation/">Optimisation</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API</a></li><li class="is-active"><a href>Denoise</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Denoise</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/main/docs/src/004-Denoise.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Denoise"><a class="docs-heading-anchor" href="#Denoise">Denoise</a><a id="Denoise-1"></a><a class="docs-heading-anchor-permalink" href="#Denoise" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimisers.SpectralDenoise" href="#PortfolioOptimisers.SpectralDenoise"><code>PortfolioOptimisers.SpectralDenoise</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct SpectralDenoise &lt;: AbstractDenoiseAlgorithm end</code></pre><p>A denoising algorithm that sets the smallest <code>num_factors</code> eigenvalues of a covariance or correlation matrix to zero, effectively removing the principal components relating to random noise according to random matrix theory-based approaches.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; alg = SpectralDenoise()
SpectralDenoise()</code></pre><p><strong>Related</strong></p><ul><li><a href="#PortfolioOptimisers.AbstractDenoiseAlgorithm"><code>AbstractDenoiseAlgorithm</code></a></li><li><a href="#PortfolioOptimisers.denoise!"><code>denoise!</code></a></li><li><a href="#Denoise"><code>Denoise</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/660c2baeb23a8b2992fb82c82bcbe6da2e5837d0/src/4_Denoise.jl#L37-L56">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimisers.FixedDenoise" href="#PortfolioOptimisers.FixedDenoise"><code>PortfolioOptimisers.FixedDenoise</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct FixedDenoise &lt;: AbstractDenoiseAlgorithm end</code></pre><p>A denoising algorithm that replaces the smallest <code>num_factors</code> eigenvalues of a covariance or correlation matrix with their average, effectively averaging the principal components relating to random noise according to random matrix theory-based approaches.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; alg = FixedDenoise()
FixedDenoise()</code></pre><p><strong>Related</strong></p><ul><li><a href="#PortfolioOptimisers.AbstractDenoiseAlgorithm"><code>AbstractDenoiseAlgorithm</code></a></li><li><a href="#PortfolioOptimisers.denoise!"><code>denoise!</code></a></li><li><a href="#Denoise"><code>Denoise</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/660c2baeb23a8b2992fb82c82bcbe6da2e5837d0/src/4_Denoise.jl#L59-L78">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimisers.ShrunkDenoise" href="#PortfolioOptimisers.ShrunkDenoise"><code>PortfolioOptimisers.ShrunkDenoise</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct ShrunkDenoise{T1} &lt;: AbstractDenoiseAlgorithm
    alpha::T1
end</code></pre><p>A denoising algorithm that shrinks the smallest <code>num_factors</code> eigenvalues of a covariance or correlation matrix towards their diagonal, controlled by the shrinkage parameter <code>alpha</code>. This approach interpolates between no shrinkage (<code>alpha = 0</code>) and full shrinkage (<code>alpha = 1</code>), providing a flexible way to regularize noisy eigenvalues.</p><p><strong>Fields</strong></p><ul><li><code>alpha</code>: The shrinkage parameter controlling the degree of shrinkage applied to the smallest eigenvalues.</li></ul><p><strong>Constructor</strong></p><pre><code class="language-julia hljs">ShrunkDenoise(; alpha::Real = 0.0)</code></pre><p>Keyword arguments correspond to the fields above.</p><p><strong>Validation</strong></p><ul><li><code>0 &lt;= alpha &lt;= 1</code>.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; alg = ShrunkDenoise(; alpha = 0.5)
ShrunkDenoise
  alpha | Float64: 0.5</code></pre><p><strong>Related</strong></p><ul><li><a href="#PortfolioOptimisers.AbstractDenoiseAlgorithm"><code>AbstractDenoiseAlgorithm</code></a></li><li><a href="#PortfolioOptimisers.denoise!"><code>denoise!</code></a></li><li><a href="#Denoise"><code>Denoise</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/660c2baeb23a8b2992fb82c82bcbe6da2e5837d0/src/4_Denoise.jl#L81-L119">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimisers.Denoise" href="#PortfolioOptimisers.Denoise"><code>PortfolioOptimisers.Denoise</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct Denoise{T1, T2, T3, T4, T5, T6} &lt;: AbstractDenoiseEstimator
    alg::T1
    args::T2
    kwargs::T3
    kernel::T4
    m::T5
    n::T6
end</code></pre><p>A flexible container type for configuring and applying denoising algorithms to covariance or correlation matrices in PortfolioOptimisers.jl.</p><p><code>Denoise</code> encapsulates all parameters required for matrix denoising, including the kernel and its arguments for spectral density estimation, the denoising algorithm, and matrix dimensions. It is the standard estimator type for denoising routines and supports a variety of algorithms (<a href="#PortfolioOptimisers.SpectralDenoise"><code>SpectralDenoise</code></a>, <a href="#PortfolioOptimisers.FixedDenoise"><code>FixedDenoise</code></a>, <a href="#PortfolioOptimisers.ShrunkDenoise"><code>ShrunkDenoise</code></a>).</p><p><strong>Fields</strong></p><ul><li><code>alg</code>: Denoising algorithm (<a href="#PortfolioOptimisers.SpectralDenoise"><code>SpectralDenoise</code></a>, <a href="#PortfolioOptimisers.FixedDenoise"><code>FixedDenoise</code></a>, <a href="#PortfolioOptimisers.ShrunkDenoise"><code>ShrunkDenoise</code></a>).</li><li><code>args</code>: Positional arguments for the univariate <a href="https://github.com/JuliaNLSolvers/Optim.jl">Optim.optimize</a>.</li><li><code>kwargs</code>: Keyword arguments for the univariate <a href="https://github.com/JuliaNLSolvers/Optim.jl">Optim.optimize</a>.</li><li><code>kernel</code>: Kernel function for <a href="https://github.com/joshday/AverageShiftedHistograms.jl">AverageShiftedHistograms.ash</a>.</li><li><code>m</code>: Number of adjacent histograms to smooth over in <a href="https://github.com/joshday/AverageShiftedHistograms.jl">AverageShiftedHistograms.ash</a>.</li><li><code>n</code>: Number of points in the range of eigenvalues used in the average shifted histogram density estimation.</li></ul><p><strong>Constructor</strong></p><pre><code class="language-julia hljs">Denoise(; alg::AbstractDenoiseAlgorithm = ShrunkDenoise(), m::Integer = 10,
        n::Integer = 1000, kernel::Any = AverageShiftedHistograms.Kernels.gaussian,
        args::Tuple = (), kwargs::NamedTuple = (;))</code></pre><p>Keyword arguments correspond to the fields above.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; de = Denoise(;)
Denoise
     alg | ShrunkDenoise
         |   alpha | Float64: 0.0
    args | Tuple{}: ()
  kwargs | @NamedTuple{}: NamedTuple()
  kernel | typeof(AverageShiftedHistograms.Kernels.gaussian): AverageShiftedHistograms.Kernels.gaussian
       m | Int64: 10
       n | Int64: 1000

julia&gt; de = Denoise(; alg = SpectralDenoise(), m = 20, n = 500)
Denoise
     alg | SpectralDenoise()
    args | Tuple{}: ()
  kwargs | @NamedTuple{}: NamedTuple()
  kernel | typeof(AverageShiftedHistograms.Kernels.gaussian): AverageShiftedHistograms.Kernels.gaussian
       m | Int64: 20
       n | Int64: 500</code></pre><p><strong>Related</strong></p><ul><li><a href="#PortfolioOptimisers.AbstractDenoiseEstimator"><code>AbstractDenoiseEstimator</code></a></li><li><a href="#PortfolioOptimisers.SpectralDenoise"><code>SpectralDenoise</code></a></li><li><a href="#PortfolioOptimisers.FixedDenoise"><code>FixedDenoise</code></a></li><li><a href="#PortfolioOptimisers.ShrunkDenoise"><code>ShrunkDenoise</code></a></li><li><a href="#PortfolioOptimisers.denoise!"><code>denoise!</code></a></li><li><a href="#PortfolioOptimisers.denoise"><code>denoise</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/660c2baeb23a8b2992fb82c82bcbe6da2e5837d0/src/4_Denoise.jl#L131-L197">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimisers.denoise!" href="#PortfolioOptimisers.denoise!"><code>PortfolioOptimisers.denoise!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">denoise!(de::Denoise, X::AbstractMatrix, q::Real; pdm::Union{Nothing, &lt;:Posdef} = Posdef())
denoise!(::Nothing, args...)</code></pre><p>In-place denoising of a covariance or correlation matrix using a <a href="#Denoise"><code>Denoise</code></a> estimator.</p><p>For covariance matrices, the function internally converts to a correlation matrix, applies the algorithm, and then rescales back to covariance.</p><p><strong>Arguments</strong></p><ul><li><p><code>de</code>: The estimator specifying the denoising algorithm.</p><ul><li><code>de::Denoise</code>: The specified denoising algorithm is applied to <code>X</code> in-place.</li><li><code>de::Nothing</code>: No-op.</li></ul></li><li><p><code>X</code>: The covariance or correlation matrix to be denoised (modified in-place).</p></li><li><p><code>q</code>: The effective sample ratio (e.g., <code>n_obs / n_assets</code>), used for spectral thresholding.</p></li><li><p><code>pdm</code>: Optional Positive definite matrix estimator. If provided, ensures the output is positive definite.</p></li></ul><p><strong>Returns</strong></p><ul><li><code>nothing</code>. The input matrix <code>X</code> is modified in-place.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; using StableRNGs

julia&gt; rng = StableRNG(123456789);

julia&gt; X = rand(rng, 10, 5);

julia&gt; X = X&#39; * X
5×5 Matrix{Float64}:
 3.29494  2.0765   1.73334  2.01524  1.77493
 2.0765   2.46967  1.39953  1.97242  2.07886
 1.73334  1.39953  1.90712  1.17071  1.30459
 2.01524  1.97242  1.17071  2.24818  1.87091
 1.77493  2.07886  1.30459  1.87091  2.44414

julia&gt; denoise!(Denoise(), X, 10 / 5)

julia&gt; X
5×5 Matrix{Float64}:
 3.29494  2.28883  1.70633  2.12343  2.17377
 2.28883  2.46967  1.59575  1.98583  2.0329
 1.70633  1.59575  1.90712  1.48044  1.51553
 2.12343  1.98583  1.48044  2.24818  1.886
 2.17377  2.0329   1.51553  1.886    2.44414</code></pre><p><strong>Related</strong></p><ul><li><a href="#PortfolioOptimisers.denoise"><code>denoise</code></a></li><li><a href="#Denoise"><code>Denoise</code></a></li><li><a href="#PortfolioOptimisers.SpectralDenoise"><code>SpectralDenoise</code></a></li><li><a href="#PortfolioOptimisers.FixedDenoise"><code>FixedDenoise</code></a></li><li><a href="#PortfolioOptimisers.ShrunkDenoise"><code>ShrunkDenoise</code></a></li><li><a href="../003-PosdefMatrix/#PortfolioOptimisers.posdef!"><code>posdef!</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/660c2baeb23a8b2992fb82c82bcbe6da2e5837d0/src/4_Denoise.jl#L364-L425">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimisers.denoise" href="#PortfolioOptimisers.denoise"><code>PortfolioOptimisers.denoise</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">denoise(de::Denoise, X::AbstractMatrix, q::Real; pdm::Union{Nothing, &lt;:Posdef} = Posdef())
denoise(::Nothing, args...)</code></pre><p>Out-of-place version of <a href="#PortfolioOptimisers.denoise!"><code>denoise!</code></a>.</p><p><strong>Related</strong></p><ul><li><a href="#PortfolioOptimisers.denoise!"><code>denoise!</code></a></li><li><a href="#Denoise"><code>Denoise</code></a></li><li><a href="#PortfolioOptimisers.SpectralDenoise"><code>SpectralDenoise</code></a></li><li><a href="#PortfolioOptimisers.FixedDenoise"><code>FixedDenoise</code></a></li><li><a href="#PortfolioOptimisers.ShrunkDenoise"><code>ShrunkDenoise</code></a></li><li><a href="../003-PosdefMatrix/#PortfolioOptimisers.posdef"><code>posdef</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/660c2baeb23a8b2992fb82c82bcbe6da2e5837d0/src/4_Denoise.jl#L450-L466">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimisers.AbstractDenoiseEstimator" href="#PortfolioOptimisers.AbstractDenoiseEstimator"><code>PortfolioOptimisers.AbstractDenoiseEstimator</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type AbstractDenoiseEstimator &lt;: AbstractEstimator end</code></pre><p>Abstract supertype for all denoising estimator types in PortfolioOptimisers.jl.</p><p>All concrete types that implement denoising of covariance or correlation matrices (e.g., via spectral, fixed, or shrinkage methods) should subtype <code>AbstractDenoiseEstimator</code>. This enables a consistent interface for denoising routines throughout the package.</p><p><strong>Related</strong></p><ul><li><a href="../001-Base/#PortfolioOptimisers.AbstractEstimator"><code>AbstractEstimator</code></a></li><li><a href="#Denoise"><code>Denoise</code></a></li><li><a href="#PortfolioOptimisers.denoise!"><code>denoise!</code></a></li><li><a href="#PortfolioOptimisers.denoise"><code>denoise</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/660c2baeb23a8b2992fb82c82bcbe6da2e5837d0/src/4_Denoise.jl#L1-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimisers.AbstractDenoiseAlgorithm" href="#PortfolioOptimisers.AbstractDenoiseAlgorithm"><code>PortfolioOptimisers.AbstractDenoiseAlgorithm</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">abstract type AbstractDenoiseAlgorithm &lt;: AbstractAlgorithm end</code></pre><p>Abstract supertype for all denoising algorithm types in PortfolioOptimisers.jl.</p><p>All concrete types that implement a specific denoising algorithm (e.g., spectral, fixed, shrinkage) should subtype <code>AbstractDenoiseAlgorithm</code>. This enables flexible extension and dispatch of denoising routines.</p><p><strong>Related</strong></p><ul><li><a href="../001-Base/#PortfolioOptimisers.AbstractAlgorithm"><code>AbstractAlgorithm</code></a></li><li><a href="#PortfolioOptimisers.SpectralDenoise"><code>SpectralDenoise</code></a></li><li><a href="#PortfolioOptimisers.FixedDenoise"><code>FixedDenoise</code></a></li><li><a href="#PortfolioOptimisers.ShrunkDenoise"><code>ShrunkDenoise</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/660c2baeb23a8b2992fb82c82bcbe6da2e5837d0/src/4_Denoise.jl#L19-L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimisers.errPDF" href="#PortfolioOptimisers.errPDF"><code>PortfolioOptimisers.errPDF</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">errPDF(x::Real, vals::AbstractVector, q::Real;
       kernel::Any = AverageShiftedHistograms.Kernels.gaussian, m::Integer = 10,
       n::Integer = 1000)</code></pre><p>Compute the sum of squared errors (SSE) between the theoretical Marčenko–Pastur (MP) eigenvalue density and the empirical eigenvalue density estimated from observed eigenvalues.</p><p>This function is used internally to fit the MP distribution to the observed spectrum, as part of the denoising procedure.</p><p><strong>Arguments</strong></p><ul><li><code>x</code>: Scale parameter for the MP distribution <code>[0, 1]</code>.</li><li><code>vals</code>: Observed eigenvalues.</li><li><code>q</code>: Effective sample ratio (e.g., <code>n_obs / n_assets</code>).</li><li><code>kernel</code>: Kernel function for <a href="https://github.com/joshday/AverageShiftedHistograms.jl">AverageShiftedHistograms.ash</a>.</li><li><code>m</code>: Number of adjacent histograms to smooth over.</li><li><code>n</code>: Number of points in the range of eigenvalues for density estimation.</li></ul><p><strong>Returns</strong></p><ul><li><code>sse::Real</code>: The sum of squared errors between the empirical and theoretical densities.</li></ul><p><strong>Related</strong></p><ul><li><a href="#PortfolioOptimisers.find_max_eval"><code>find_max_eval</code></a></li><li><a href="#Denoise"><code>Denoise</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/660c2baeb23a8b2992fb82c82bcbe6da2e5837d0/src/4_Denoise.jl#L279-L307">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimisers.find_max_eval" href="#PortfolioOptimisers.find_max_eval"><code>PortfolioOptimisers.find_max_eval</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">find_max_eval(vals::AbstractVector, q::Real;
              kernel::Any = AverageShiftedHistograms.Kernels.gaussian, m::Integer = 10,
              n::Integer = 1000, args::Tuple = (), kwargs::NamedTuple = (;))</code></pre><p>Estimate the upper edge of the Marčenko–Pastur (MP) distribution for a set of eigenvalues, used to separate signal from noise in random matrix denoising.</p><p>This function fits the MP distribution to the observed spectrum by minimizing the sum of squared errors between the empirical and theoretical densities, and returns the estimated maximum eigenvalue for noise.</p><p><strong>Arguments</strong></p><ul><li><code>vals</code>: Observed eigenvalues (typically sorted in ascending order).</li><li><code>q</code>: Effective sample ratio (e.g., <code>n_obs / n_assets</code>).</li><li><code>kernel</code>: Kernel function for <a href="https://github.com/joshday/AverageShiftedHistograms.jl">AverageShiftedHistograms.ash</a>.</li><li><code>m</code>: Number of adjacent histograms to smooth over.</li><li><code>n</code>: Number of points in the range of eigenvalues for density estimation.</li><li><code>args</code>: Additional positional arguments for <a href="https://github.com/JuliaNLSolvers/Optim.jl">Optim.optimize</a>.</li><li><code>kwargs</code>: Additional keyword arguments for <a href="https://github.com/JuliaNLSolvers/Optim.jl">Optim.optimize</a>.</li></ul><p><strong>Returns</strong></p><ul><li><code>(e_max::Real, x::Real)</code>: Tuple containing the estimated upper edge of the noise eigenvalue spectrum (<code>e_max</code>) and the fitted scale parameter (<code>x</code>).</li></ul><p><strong>Related</strong></p><ul><li><a href="#PortfolioOptimisers.errPDF"><code>errPDF</code></a></li><li><a href="#Denoise"><code>Denoise</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/660c2baeb23a8b2992fb82c82bcbe6da2e5837d0/src/4_Denoise.jl#L323-L352">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="PortfolioOptimisers._denoise!" href="#PortfolioOptimisers._denoise!"><code>PortfolioOptimisers._denoise!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">_denoise!(alg::AbstractDenoiseAlgorithm, X::AbstractMatrix, vals::AbstractVector,
          vecs::AbstractMatrix, num_factors::Integer)</code></pre><p>In-place denoising of a covariance or correlation matrix using a specific denoising algorithm.</p><p>These methods are called internally by <a href="#PortfolioOptimisers.denoise!"><code>denoise!</code></a> and <a href="#PortfolioOptimisers.denoise"><code>denoise</code></a> when a <a href="#Denoise"><code>Denoise</code></a> estimator is used, and should not typically be called directly.</p><p><strong>Arguments</strong></p><ul><li><p><code>alg::AbstractDenoiseAlgorithm</code>: The denoising algorithm to apply.</p><ul><li><code>alg::SpectralDenoise</code>: Sets the smallest <code>num_factors</code> eigenvalues to zero.</li><li><code>alg::FixedDenoise</code>: Replaces the smallest <code>num_factors</code> eigenvalues with their average.</li><li><code>alg::ShrunkDenoise</code>: Shrinks the smallest <code>num_factors</code> eigenvalues towards the diagonal, controlled by <code>alg.alpha</code>.</li></ul></li><li><p><code>X</code>: The matrix to be denoised (modified in-place).</p></li><li><p><code>vals</code>: Eigenvalues of <code>X</code>, sorted in ascending order.</p></li><li><p><code>vecs</code>: Corresponding eigenvectors of <code>X</code>.</p></li><li><p><code>num_factors</code>: Number of eigenvalues to treat as noise.</p></li></ul><p><strong>Returns</strong></p><ul><li><code>nothing</code>. The input matrix <code>X</code> is modified in-place.</li></ul><p><strong>Related</strong></p><ul><li><a href="#PortfolioOptimisers.denoise!"><code>denoise!</code></a></li><li><a href="#Denoise"><code>Denoise</code></a></li><li><a href="#PortfolioOptimisers.SpectralDenoise"><code>SpectralDenoise</code></a></li><li><a href="#PortfolioOptimisers.FixedDenoise"><code>FixedDenoise</code></a></li><li><a href="#PortfolioOptimisers.ShrunkDenoise"><code>ShrunkDenoise</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/660c2baeb23a8b2992fb82c82bcbe6da2e5837d0/src/4_Denoise.jl#L213-L247">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../003-PosdefMatrix/">« PosdefMatrix</a><a class="docs-footer-nextpage" href="../005-Detone/">Detone »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Friday 19 September 2025 23:03">Friday 19 September 2025</span>. Using Julia version 1.11.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
