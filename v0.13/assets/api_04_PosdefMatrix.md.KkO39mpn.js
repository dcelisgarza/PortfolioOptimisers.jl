import{_ as p,C as o,c as r,o as h,j as s,a as e,aA as l,G as t,w as n}from"./chunks/framework.Db8Llsx_.js";const C=JSON.parse('{"title":"Positive definite matrix projection","description":"","frontmatter":{},"headers":[],"relativePath":"api/04_PosdefMatrix.md","filePath":"api/04_PosdefMatrix.md","lastUpdated":null}'),d={name:"api/04_PosdefMatrix.md"},k={class:"jldocstring custom-block",open:""},g={class:"jldocstring custom-block",open:""},c={class:"jldocstring custom-block",open:""},f={class:"jldocstring custom-block",open:""};function E(m,i,y,u,F,P){const a=o("Badge");return h(),r("div",null,[i[16]||(i[16]=s("h1",{id:"Positive-definite-matrix-projection",tabindex:"-1"},[e("Positive definite matrix projection "),s("a",{class:"header-anchor",href:"#Positive-definite-matrix-projection","aria-label":'Permalink to "Positive definite matrix projection {#Positive-definite-matrix-projection}"'},"​")],-1)),i[17]||(i[17]=s("p",null,"All co-moment matrices are supposed to be positive definite. However, non-positive definite matrices can arise due to collinearity, having fewer observations than observables, and floating point inacuracies. Non-positive definite matrices have zero or negative eigenvalues.",-1)),i[18]||(i[18]=s("ul",null,[s("li",null,[s("p",null,"Zero eigenvalues imply collinearity between assets, which means the system is underdetermined and therefore a linear or quadratic system involving the matrix does not have a unique solution.")]),s("li",null,[s("p",null,"Negative eigenvalues imply numerical stability issues, which usually arise from poorly conditioned systems, which for covariance and correlation matrices arise from high collinearity.")])],-1)),i[19]||(i[19]=s("p",null,"In order to obtain unique results and improve numerical stability, these non-positive definite matrices can be projected to the nearest positive definite matrix. This keeps the underlying relationships as intact as possible, while ensuring they have the appropriate numerical characteristics.",-1)),i[20]||(i[20]=s("p",null,"These types and functions let us do so.",-1)),s("details",k,[s("summary",null,[i[0]||(i[0]=s("a",{id:"PortfolioOptimisers.AbstractPosdefEstimator",href:"#PortfolioOptimisers.AbstractPosdefEstimator"},[s("span",{class:"jlbinding"},"PortfolioOptimisers.AbstractPosdefEstimator")],-1)),i[1]||(i[1]=e()),t(a,{type:"info",class:"jlObjectType jlType",text:"Type"})]),i[3]||(i[3]=l('<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">abstract type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AbstractPosdefEstimator </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> AbstractEstimator</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> end</span></span></code></pre></div><p>Abstract supertype for all positive definite matrix estimator types in <code>PortfolioOptimisers.jl</code>.</p><p>All concrete types that implement positive definite matrix projection or estimation (e.g., for covariance or correlation matrices) should subtype <code>AbstractPosdefEstimator</code>. This enables a consistent interface for positive definite matrix estimation routines throughout the package.</p><p><strong>Related</strong></p><ul><li><p><a href="/PortfolioOptimisers.jl/v0.13/api/01_Base#PortfolioOptimisers.AbstractEstimator"><code>AbstractEstimator</code></a></p></li><li><p><a href="/PortfolioOptimisers.jl/v0.13/api/04_PosdefMatrix#PortfolioOptimisers.Posdef"><code>Posdef</code></a></p></li><li><p><a href="/PortfolioOptimisers.jl/v0.13/api/04_PosdefMatrix#PortfolioOptimisers.posdef!"><code>posdef!</code></a></p></li><li><p><a href="/PortfolioOptimisers.jl/v0.13/api/04_PosdefMatrix#PortfolioOptimisers.posdef"><code>posdef</code></a></p></li></ul>',5)),t(a,{type:"info",class:"source-link",text:"source"},{default:n(()=>[...i[2]||(i[2]=[s("a",{href:"https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/37d245d28b861c0f34f0da4471f232efe3ebeb1a/src/04_PosdefMatrix.jl#L1-L14",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),s("details",g,[s("summary",null,[i[4]||(i[4]=s("a",{id:"PortfolioOptimisers.Posdef",href:"#PortfolioOptimisers.Posdef"},[s("span",{class:"jlbinding"},"PortfolioOptimisers.Posdef")],-1)),i[5]||(i[5]=e()),t(a,{type:"info",class:"jlObjectType jlType",text:"Type"})]),i[7]||(i[7]=l(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Posdef{T1, T2} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> AbstractPosdefEstimator</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    alg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">T1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    kwargs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">T2</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><p>A concrete estimator type for projecting a matrix to the nearest positive definite matrix, typically used for co-moment matrices.</p><p><code>Posdef</code> encapsulates all parameters required for positive definite matrix projection in <a href="/PortfolioOptimisers.jl/v0.13/api/04_PosdefMatrix#PortfolioOptimisers.posdef!"><code>posdef!</code></a> and <a href="/PortfolioOptimisers.jl/v0.13/api/04_PosdefMatrix#PortfolioOptimisers.posdef"><code>posdef</code></a> to perform the nearest positive definite projection according to the estimator.</p><p><strong>Fields</strong></p><ul><li><p><code>alg</code>: The algorithm used for the nearest correlation matrix projection.</p></li><li><p><code>kwargs</code>: A named tuple of keyword arguments to be passed to the algorithm.</p></li></ul><p><strong>Constructor</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Posdef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; alg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Any</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NearestCorrelationMatrix</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Newton, kwargs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NamedTuple</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (;))</span></span></code></pre></div><p>Keyword arguments correspond to the fields above.</p><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Posdef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Posdef</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     alg ┼ UnionAll</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NearestCorrelationMatrix</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Newton</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  kwargs ┴ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">@NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> NamedTuple</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><p><strong>Related</strong></p><ul><li><p><a href="/PortfolioOptimisers.jl/v0.13/api/04_PosdefMatrix#PortfolioOptimisers.AbstractPosdefEstimator"><code>AbstractPosdefEstimator</code></a></p></li><li><p><a href="/PortfolioOptimisers.jl/v0.13/api/04_PosdefMatrix#PortfolioOptimisers.posdef!"><code>posdef!</code></a></p></li><li><p><a href="/PortfolioOptimisers.jl/v0.13/api/04_PosdefMatrix#PortfolioOptimisers.posdef"><code>posdef</code></a></p></li><li><p><a href="https://github.com/adknudson/NearestCorrelationMatrix.jl" target="_blank" rel="noreferrer"><code>NearestCorrelationMatrix.jl</code></a></p></li></ul>`,12)),t(a,{type:"info",class:"source-link",text:"source"},{default:n(()=>[...i[6]||(i[6]=[s("a",{href:"https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/37d245d28b861c0f34f0da4471f232efe3ebeb1a/src/04_PosdefMatrix.jl#L16-L52",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),s("details",c,[s("summary",null,[i[8]||(i[8]=s("a",{id:"PortfolioOptimisers.posdef!",href:"#PortfolioOptimisers.posdef!"},[s("span",{class:"jlbinding"},"PortfolioOptimisers.posdef!")],-1)),i[9]||(i[9]=e()),t(a,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),i[11]||(i[11]=l(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">posdef!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pdm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Posdef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, X</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MatNum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">posdef!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, args</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>In-place projection of a matrix to the nearest positive definite matrix using the specified estimator.</p><p>For matrices without unit diagonal, the function converts them into correlation matrices i.e. matrices with unit diagonal, applies the algorithm, and rescales them back.</p><p><strong>Arguments</strong></p><ul><li><p><code>pdm</code>: The estimator specifying the positive definite projection algorithm.</p><ul><li><p><code>pdm::Posdef</code>: The algorithm specified in <code>pdm.alg</code> is used to project <code>X</code> to the nearest PD matrix. If <code>X</code> is already positive definite, it is left unchanged.</p></li><li><p><code>pdm::Nothing</code>: No-op.</p></li></ul></li><li><p><code>X</code>: The matrix to be projected in-place.</p></li></ul><p><strong>Returns</strong></p><ul><li><code>nothing</code>. The input matrix <code>X</code> is modified in-place.</li></ul><p><strong>Validation</strong></p><ul><li>If the matrix cannot be made positive definite, a warning is emitted.</li></ul><p><strong>Examples</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LinearAlgebra</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> est </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Posdef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> X </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.9</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> X[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Not PD</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> posdef!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(est, X)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> X</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">×</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Matrix{Float64}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1.0</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  1.0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LinearAlgebra</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">isposdef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(X)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><p><strong>Related</strong></p><ul><li><p><a href="/PortfolioOptimisers.jl/v0.13/api/04_PosdefMatrix#PortfolioOptimisers.posdef"><code>posdef</code></a></p></li><li><p><a href="/PortfolioOptimisers.jl/v0.13/api/04_PosdefMatrix#PortfolioOptimisers.Posdef"><code>Posdef</code></a></p></li><li><p><a href="/PortfolioOptimisers.jl/v0.13/api/01_Base#PortfolioOptimisers.MatNum"><code>MatNum</code></a></p></li></ul>`,13)),t(a,{type:"info",class:"source-link",text:"source"},{default:n(()=>[...i[10]||(i[10]=[s("a",{href:"https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/37d245d28b861c0f34f0da4471f232efe3ebeb1a/src/04_PosdefMatrix.jl#L63-L115",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})]),s("details",f,[s("summary",null,[i[12]||(i[12]=s("a",{id:"PortfolioOptimisers.posdef",href:"#PortfolioOptimisers.posdef"},[s("span",{class:"jlbinding"},"PortfolioOptimisers.posdef")],-1)),i[13]||(i[13]=e()),t(a,{type:"info",class:"jlObjectType jlFunction",text:"Function"})]),i[15]||(i[15]=l(`<div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">posdef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pdm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Posdef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, X</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MatNum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">posdef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, args</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Out-of-place version of <a href="/PortfolioOptimisers.jl/v0.13/api/04_PosdefMatrix#PortfolioOptimisers.posdef!"><code>posdef!</code></a>.</p><p><strong>Related</strong></p><ul><li><p><a href="/PortfolioOptimisers.jl/v0.13/api/04_PosdefMatrix#PortfolioOptimisers.posdef!"><code>posdef!</code></a></p></li><li><p><a href="/PortfolioOptimisers.jl/v0.13/api/04_PosdefMatrix#PortfolioOptimisers.Posdef"><code>Posdef</code></a></p></li><li><p><a href="/PortfolioOptimisers.jl/v0.13/api/01_Base#PortfolioOptimisers.MatNum"><code>MatNum</code></a></p></li></ul>`,4)),t(a,{type:"info",class:"source-link",text:"source"},{default:n(()=>[...i[14]||(i[14]=[s("a",{href:"https://github.com/dcelisgarza/PortfolioOptimisers.jl/blob/37d245d28b861c0f34f0da4471f232efe3ebeb1a/src/04_PosdefMatrix.jl#L139-L150",target:"_blank",rel:"noreferrer"},"source",-1)])]),_:1})])])}const v=p(d,[["render",E]]);export{C as __pageData,v as default};
